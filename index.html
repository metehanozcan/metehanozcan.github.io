<!DOCTYPE html>
<html lang="tr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#5D5CDE">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Crypto Signals">
    <title>Advanced Multi-Pair Crypto Trading Signals - A01 & A02 Strategies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#F0B90B',
                        secondary: '#FCD535',
                        accent: '#181A20',
                        'bg-light': '#FFFFFF',
                        'bg-dark': '#181A20'
                    },
                    animation: {
                        'bounce-soft': 'bounce 2s infinite',
                        'pulse-soft': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out'
                    },
                    screens: {
                        'xs': '375px'
                    }
                }
            }
        }
    </script>
    <style>
        /* Enhanced mobile styles */
        .notification-success {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        .notification-danger {
            background: linear-gradient(135deg, #EF4444, #DC2626);
        }
        .notification-warning {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }
        .pulse-ring {
            animation: pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.33); }
            80%, 100% { opacity: 0; }
        }
        .pair-card {
            transition: all 0.3s ease;
            touch-action: manipulation;
        }
        .pair-card:hover {
            transform: translateY(-2px);
        }
        .pair-card:active {
            transform: translateY(0px);
        }
        .signal-animation {
            animation: signalPulse 0.6s ease-in-out;
        }
        @keyframes signalPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .chart-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
        }
        .dark .chart-container {
            background: #1f2937;
        }
        .sound-wave {
            animation: soundWave 0.8s ease-in-out;
        }
        @keyframes soundWave {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
            75% { transform: scale(1.1); }
        }
        
        /* Enhanced scrollbars */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-track {
            background: #374151;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #6b7280;
        }
        
        /* Mobile-specific enhancements */
        @media (max-width: 768px) {
            .mobile-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
            .mobile-padding {
                padding: 1rem;
            }
            .mobile-text {
                font-size: 0.875rem;
            }
            .mobile-button {
                min-height: 44px;
                min-width: 44px;
            }
            .mobile-card {
                margin-bottom: 0.75rem;
            }
        }
        
        /* Touch-friendly elements */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Enhanced performance indicators */
        .performance-positive {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        .performance-negative {
            background: linear-gradient(135deg, #EF4444, #DC2626);
        }
        .performance-neutral {
            background: linear-gradient(135deg, #6B7280, #4B5563);
        }
        
        /* Loading states */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        .dark .skeleton {
            background: linear-gradient(90deg, #374151 25%, #4B5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Bottom navigation for mobile */
        .bottom-nav {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        .dark .bottom-nav {
            background: rgba(24, 24, 24, 0.9);
        }
        
        /* Modern Toggle Switches */
        .toggle-switch {
            position: relative;
            transition: background-color 0.3s;
        }
        .toggle-switch.active {
            background-color: #10B981;
        }
        .toggle-switch.active .toggle-dot {
            transform: translateX(20px);
        }
        
        /* Modern Range Sliders */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
        }
        .slider::-webkit-slider-track {
            background: #d1d5db;
            height: 4px;
            border-radius: 2px;
        }
        .dark .slider::-webkit-slider-track {
            background: #4b5563;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #F0B90B;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .slider::-webkit-slider-thumb:hover {
            background: #FCD535;
            transform: scale(1.1);
        }
        .slider::-moz-range-track {
            background: #d1d5db;
            height: 4px;
            border-radius: 2px;
            border: none;
        }
        .dark .slider::-moz-range-track {
            background: #4b5563;
        }
        .slider::-moz-range-thumb {
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #F0B90B;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* Enhanced Alert Cards */
        .alert-card {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border-left: 4px solid #F59E0B;
        }
        .dark .alert-card {
            background: linear-gradient(135deg, #92400E, #B45309);
            border-left: 4px solid #F59E0B;
        }

        /* Strategy specific styling */
        .strategy-a01 {
            background: linear-gradient(135deg, #3B82F6, #1E40AF);
        }
        .strategy-a02 {
            background: linear-gradient(135deg, #8B5CF6, #5B21B6);
        }
        .confluence-high {
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
            border: 2px solid #10B981;
        }
        .confluence-medium {
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.4);
            border: 2px solid #F59E0B;
        }
        .confluence-low {
            box-shadow: 0 0 5px rgba(107, 114, 128, 0.4);
            border: 2px solid #6B7280;
        }
    </style>
</head>
<body class="h-full bg-bg-light dark:bg-bg-dark text-gray-900 dark:text-white transition-colors duration-200 overflow-x-hidden">
    <!-- PWA Install Banner -->
    <div id="installBanner" class="hidden fixed top-0 left-0 right-0 bg-primary text-white p-3 z-50 animate-slide-down">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <div class="flex items-center space-x-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
                <div>
                    <div class="font-semibold text-sm">Ana Ekrana Ekle</div>
                    <div class="text-xs opacity-90">Advanced Strategy ile</div>
                </div>
            </div>
            <div class="flex space-x-2">
                <button id="installBtn" class="px-3 py-1 bg-white text-primary rounded text-sm font-medium">Ekle</button>
                <button id="dismissBanner" class="p-1 text-white/70">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="min-h-screen flex flex-col pb-16 md:pb-0">
        <!-- Enhanced Header -->
        <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-3">
                        <div class="relative">
                            <div class="w-8 h-8 flex items-center justify-center">
                                <svg class="w-8 h-8" viewBox="0 0 4091.27 4091.73" xmlns="http://www.w3.org/2000/svg">
                                    <path fill="#F7931A" fill-rule="nonzero" d="M4030.06 2540.77c-273.24,1096.01 -1383.32,1763.02 -2479.46,1489.71 -1095.68,-273.24 -1762.69,-1383.39 -1489.33,-2479.31 273.12,-1096.13 1383.2,-1763.19 2479,-1489.95 1096.06,273.24 1763.03,1383.51 1489.76,2479.57l0.02 -0.02z"/>
                                    <path fill="white" fill-rule="nonzero" d="M2947.77 1754.38c40.72,-272.26 -166.56,-418.61 -450,-516.24l91.95 -368.8 -224.5 -55.94 -89.51 359.09c-59.02,-14.72 -119.63,-28.59 -179.87,-42.34l90.16 -361.46 -224.36 -55.94 -92 368.68c-48.84,-11.12 -96.81,-22.11 -143.35,-33.69l0.26 -1.16 -309.59 -77.31 -59.72 239.78c0,0 166.56,38.18 163.05,40.53 90.91,22.69 107.35,82.87 104.62,130.57l-104.74 420.15c6.26,1.59 14.38,3.89 23.34,7.49 -7.49,-1.86 -15.46,-3.89 -23.73,-5.87l-146.81 588.57c-11.11,27.62 -39.31,69.07 -102.87,53.33 2.25,3.26 -163.17,-40.72 -163.17,-40.72l-111.46 256.98 292.15 72.83c54.35,13.63 107.61,27.89 160.06,41.3l-92.9 373.03 224.24 55.94 92 -369.07c61.26,16.63 120.71,31.97 178.91,46.43l-91.69 367.33 224.51 55.94 92.89 -372.33c382.82,72.45 670.67,43.24 791.83,-303.02 97.63,-278.78 -4.86,-439.58 -206.26,-544.44 146.69,-33.83 257.18,-130.31 286.64,-329.61l-0.07 -0.05zm-512.93 719.26c-69.38,278.78 -538.76,128.08 -690.94,90.29l123.28 -494.2c152.17,37.99 640.17,113.17 567.67,403.91zm69.43 -723.3c-63.29,253.58 -453.96,124.75 -580.69,93.16l111.77 -448.21c126.73,31.59 534.85,90.55 468.94,355.05l-0.02 0z"/>
                                </svg>
                            </div>
                            <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full pulse-ring" id="liveIndicator"></div>
                        </div>
                        <div>
                            <h1 class="text-lg md:text-xl font-semibold">Advanced Crypto Signals</h1>
                            <div class="flex items-center space-x-2 text-xs text-gray-500">
                                <div class="bg-primary/10 text-primary px-2 py-0.5 rounded-full font-medium" id="activePairsCount">0 çift</div>
                                <div class="bg-green-100 dark:bg-green-900 text-green-600 px-2 py-0.5 rounded-full" id="profitability">+0%</div>
                                <div class="bg-blue-100 dark:bg-blue-900 text-blue-600 px-2 py-0.5 rounded-full">A01+A02</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Desktop Controls -->
                    <div class="hidden md:flex items-center space-x-3">
                        <button id="themeToggle" class="touch-target p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                            <svg class="w-5 h-5 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </button>
                        
                        <button id="soundToggle" class="touch-target p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" title="Ses Ayarları">
                            <svg class="w-5 h-5" id="soundIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M5 7h4l5-5v16l-5-5H5a2 2 0 01-2-2V9a2 2 0 012-2z"></path>
                            </svg>
                        </button>
                        
                        <button id="notificationBtn" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors text-sm flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5A2.5 2.5 0 0 1 4 16.5v-9A2.5 2.5 0 0 1 6.5 5h11A2.5 2.5 0 0 1 20 7.5v4"></path>
                            </svg>
                            <span>Bildirimler</span>
                        </button>

                        <button id="portfolioBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors text-sm flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                            </svg>
                            <span>Portföy</span>
                        </button>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobileMenuBtn" class="md:hidden touch-target p-2 rounded-lg bg-gray-100 dark:bg-gray-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4">
                <div class="grid grid-cols-2 gap-3">
                    <button id="mobileThemeToggle" class="mobile-button p-3 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                        <span class="text-sm">Tema</span>
                    </button>
                    
                    <button id="mobileSoundToggle" class="mobile-button p-3 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M5 7h4l5-5v16l-5-5H5a2 2 0 01-2-2V9a2 2 0 012-2z"></path>
                        </svg>
                        <span class="text-sm">Ses</span>
                    </button>
                    
                    <button id="mobileNotificationBtn" class="mobile-button p-3 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5A2.5 2.5 0 0 1 4 16.5v-9A2.5 2.5 0 0 1 6.5 5h11A2.5 2.5 0 0 1 20 7.5v4"></path>
                        </svg>
                        <span class="text-sm">Bildirim</span>
                    </button>
                    
                    <button id="mobilePortfolioBtn" class="mobile-button p-3 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        <span class="text-sm">Portföy</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-4 md:py-8">
            <!-- Modern Market Overview Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <!-- Bitcoin Card -->
                <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 flex items-center justify-center">
                                <svg class="w-6 h-6" viewBox="0 0 4091.27 4091.73" xmlns="http://www.w3.org/2000/svg">
                                    <path fill="#F7931A" fill-rule="nonzero" d="M4030.06 2540.77c-273.24,1096.01 -1383.32,1763.02 -2479.46,1489.71 -1095.68,-273.24 -1762.69,-1383.39 -1489.33,-2479.31 273.12,-1096.13 1383.2,-1763.19 2479,-1489.95 1096.06,273.24 1763.03,1383.51 1489.76,2479.57l0.02 -0.02z"/>
                                    <path fill="white" fill-rule="nonzero" d="M2947.77 1754.38c40.72,-272.26 -166.56,-418.61 -450,-516.24l91.95 -368.8 -224.5 -55.94 -89.51 359.09c-59.02,-14.72 -119.63,-28.59 -179.87,-42.34l90.16 -361.46 -224.36 -55.94 -92 368.68c-48.84,-11.12 -96.81,-22.11 -143.35,-33.69l0.26 -1.16 -309.59 -77.31 -59.72 239.78c0,0 166.56,38.18 163.05,40.53 90.91,22.69 107.35,82.87 104.62,130.57l-104.74 420.15c6.26,1.59 14.38,3.89 23.34,7.49 -7.49,-1.86 -15.46,-3.89 -23.73,-5.87l-146.81 588.57c-11.11,27.62 -39.31,69.07 -102.87,53.33 2.25,3.26 -163.17,-40.72 -163.17,-40.72l-111.46 256.98 292.15 72.83c54.35,13.63 107.61,27.89 160.06,41.3l-92.9 373.03 224.24 55.94 92 -369.07c61.26,16.63 120.71,31.97 178.91,46.43l-91.69 367.33 224.51 55.94 92.89 -372.33c382.82,72.45 670.67,43.24 791.83,-303.02 97.63,-278.78 -4.86,-439.58 -206.26,-544.44 146.69,-33.83 257.18,-130.31 286.64,-329.61l-0.07 -0.05zm-512.93 719.26c-69.38,278.78 -538.76,128.08 -690.94,90.29l123.28 -494.2c152.17,37.99 640.17,113.17 567.67,403.91zm69.43 -723.3c-63.29,253.58 -453.96,124.75 -580.69,93.16l111.77 -448.21c126.73,31.59 534.85,90.55 468.94,355.05l-0.02 0z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-xs font-medium opacity-90">Bitcoin</p>
                                <p class="text-xl font-bold" id="btcPrice">$0</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="flex items-center space-x-1">
                                <svg class="w-4 h-4" id="btcTrendIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                                <span class="text-sm font-bold" id="btcChange">0%</span>
                            </div>
                            <div class="w-16 h-8 mt-2">
                                <div class="h-full bg-white/20 rounded" id="btcSparkline"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ethereum Card -->
                <div class="bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M11.944 17.97L4.58 13.62 11.943 24l7.37-10.38-7.372 4.35h.003zM12.056 0L4.69 12.223l7.365 4.354 7.365-4.35L12.056 0z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-xs font-medium opacity-90">Ethereum</p>
                                <p class="text-xl font-bold" id="ethPrice">$0</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="flex items-center space-x-1">
                                <svg class="w-4 h-4" id="ethTrendIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                                <span class="text-sm font-bold" id="ethChange">0%</span>
                            </div>
                            <div class="w-16 h-8 mt-2">
                                <div class="h-full bg-white/20 rounded" id="ethSparkline"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fear & Greed Index Card -->
                <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="text-xs font-medium opacity-90">Fear & Greed</p>
                                <p class="text-xl font-bold" id="fearGreedIndex">50</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-sm font-bold" id="fearGreedLabel">Neutral</span>
                            <div class="w-16 h-2 bg-white/20 rounded-full mt-2">
                                <div class="h-full bg-white rounded-full transition-all duration-500" id="fearGreedBar" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Signal Accuracy Card -->
                <div class="bg-gradient-to-br from-primary to-secondary rounded-2xl p-4 text-black shadow-lg hover:shadow-xl transition-all duration-300">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-black/10 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="text-xs font-medium opacity-75">A01+A02 Accuracy</p>
                                <p class="text-xl font-bold" id="signalAccuracy">0%</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-sm font-bold opacity-75" id="totalSignalsCount">0 signals</span>
                            <div class="w-16 h-2 bg-black/10 rounded-full mt-2">
                                <div class="h-full bg-black/40 rounded-full transition-all duration-500" id="accuracyBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Add Pair Section -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg mobile-padding border border-gray-200 dark:border-gray-700 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Yeni Çift Ekle - Advanced Strategy
                    </h2>
                    <button id="presetPairsBtn" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs md:text-sm transition-colors flex items-center space-x-1">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        <span>A01+A02 Preset</span>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Sembol</label>
                        <select id="symbolSelect" class="w-full px-3 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent mobile-button">
                            <option value="">Sembol Seçin</option>
                            <option value="btcusdt">BTC/USDT</option>
                            <option value="ethusdt">ETH/USDT</option>
                            <option value="adausdt">ADA/USDT</option>
                            <option value="bnbusdt">BNB/USDT</option>
                            <option value="solusdt">SOL/USDT</option>
                            <option value="dogeusdt">DOGE/USDT</option>
                            <option value="xrpusdt">XRP/USDT</option>
                            <option value="avaxusdt">AVAX/USDT</option>
                            <option value="dotusdt">DOT/USDT</option>
                            <option value="maticusdt">MATIC/USDT</option>
                            <option value="linkusdt">LINK/USDT</option>
                            <option value="ltcusdt">LTC/USDT</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Zaman Dilimi</label>
                        <select id="intervalSelect" class="w-full px-3 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent mobile-button">
                            <option value="1m">1 Dakika</option>
                            <option value="3m" selected>3 Dakika (LTF)</option>
                            <option value="5m">5 Dakika (LTF)</option>
                            <option value="15m">15 Dakika (MTF)</option>
                            <option value="30m">30 Dakika (MTF)</option>
                            <option value="1h">1 Saat (HTF)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">EMA Cross (5-14)</label>
                        <div class="flex space-x-2">
                            <input type="number" id="emaShort" value="5" min="1" max="50" class="w-full px-3 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="5">
                            <input type="number" id="emaLong" value="14" min="1" max="200" class="w-full px-3 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="14">
                        </div>
                    </div>
                    
                    <div class="flex items-end">
                        <button id="addPairBtn" class="w-full mobile-button px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition-colors flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <span>Çift Ekle</span>
                        </button>
                    </div>
                </div>

                <!-- Quick Add Section -->
                <div class="border-t border-gray-200 dark:border-gray-600 pt-4">
                    <div class="flex flex-wrap gap-2 mb-4">
                        <button class="quick-add-btn px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm hover:bg-primary hover:text-white transition-colors" data-symbol="btcusdt">BTC</button>
                        <button class="quick-add-btn px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm hover:bg-primary hover:text-white transition-colors" data-symbol="ethusdt">ETH</button>
                        <button class="quick-add-btn px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm hover:bg-primary hover:text-white transition-colors" data-symbol="solusdt">SOL</button>
                        <button class="quick-add-btn px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm hover:bg-primary hover:text-white transition-colors" data-symbol="adausdt">ADA</button>
                        <button class="quick-add-btn px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm hover:bg-primary hover:text-white transition-colors" data-symbol="dogeusdt">DOGE</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="customSymbol" class="px-3 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Özel Sembol (PEPEUSDT)">
                        <button id="addCustomPairBtn" class="mobile-button px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors">
                            Özel Ekle
                        </button>
                        <button id="clearAllBtn" class="mobile-button px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors">
                            Hepsini Temizle
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 xl:grid-cols-4 gap-6">
                <!-- Charts and Pairs Section -->
                <div class="xl:col-span-3 space-y-6">
                    <!-- Enhanced Chart Section -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                            <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0">
                                <h2 class="text-lg font-semibold flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    Advanced Price Charts
                                    <span class="ml-2 px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 text-xs rounded-full" id="chartStatus">LIVE</span>
                                </h2>
                                <div class="flex flex-wrap items-center gap-2">
                                    <select id="chartType" class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option value="custom">Advanced Chart</option>
                                        <option value="tradingview">TradingView</option>
                                    </select>
                                    <select id="chartSymbol" class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option value="btcusdt">BTC/USDT</option>
                                        <option value="ethusdt">ETH/USDT</option>
                                        <option value="adausdt">ADA/USDT</option>
                                        <option value="bnbusdt">BNB/USDT</option>
                                        <option value="solusdt">SOL/USDT</option>
                                    </select>
                                    <select id="chartInterval" class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option value="1m">1m</option>
                                        <option value="3m" selected>3m</option>
                                        <option value="5m">5m</option>
                                        <option value="15m">15m</option>
                                    </select>
                                    <button id="refreshChart" class="touch-target p-2 text-gray-600 dark:text-gray-400 hover:text-primary transition-colors border border-gray-300 dark:border-gray-600 rounded" title="Grafiği Yenile">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-container p-4" id="customChartContainer">
                            <canvas id="priceChart" class="w-full h-64 md:h-80"></canvas>
                        </div>
                        
                        <div class="chart-container h-64 md:h-96" id="tradingViewContainer" style="display: none;">
                            <div class="tradingview-widget-container" style="height:100%;width:100%">
                                <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%" id="tradingview_widget"></div>
                                <div class="tradingview-widget-copyright">
                                    <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
                                        <span class="text-blue-600 dark:text-blue-400 text-xs">Advanced Charts by TradingView</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Active Pairs -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg mobile-padding border border-gray-200 dark:border-gray-700">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold">Aktif Çiftler - Advanced Strategy</h2>
                            <div class="flex items-center space-x-2">
                                <button id="sortPairsBtn" class="px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-sm transition-colors flex items-center space-x-1">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                    <span>Sırala</span>
                                </button>
                                <button id="exportPairsBtn" class="px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm transition-colors flex items-center space-x-1">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    <span>Export</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Pairs Filter -->
                        <div class="mb-4 flex flex-wrap gap-2">
                            <button class="filter-btn active px-3 py-1 bg-primary text-white rounded-full text-sm" data-filter="all">Tümü</button>
                            <button class="filter-btn px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm" data-filter="profitable">Kârlı</button>
                            <button class="filter-btn px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm" data-filter="signals">A01+A02 Sinyalli</button>
                            <button class="filter-btn px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm" data-filter="alerts">Alarmlar</button>
                            <button class="filter-btn px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm" data-filter="confluence">Yüksek Confluence</button>
                        </div>
                        
                        <div id="activePairs" class="mobile-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Pairs will be added here -->
                        </div>
                        
                        <div id="noPairsMessage" class="text-center py-12 text-gray-500 dark:text-gray-400">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            <p class="text-lg">Henüz çift eklenmemiş</p>
                            <p class="text-sm">A01 & A02 stratejileri ile başlayın</p>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Signals Panel -->
                <div class="space-y-6">
                    <!-- Performance Dashboard -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="bg-gradient-to-r from-primary to-secondary p-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-bold text-black flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                    A01+A02 Performance
                                </h3>
                                <button id="refreshStats" class="bg-black/20 hover:bg-black/30 text-black px-3 py-1 rounded-lg text-sm transition-colors flex items-center space-x-1">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                    <span>Refresh</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-4 space-y-4">
                            <!-- Stats Cards Grid -->
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-xs text-green-600 dark:text-green-400 font-medium">Başarılı</p>
                                            <p class="text-xl font-bold text-green-700 dark:text-green-300" id="successfulSignals">0</p>
                                        </div>
                                        <div class="w-8 h-8 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center">
                                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-800">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-xs text-red-600 dark:text-red-400 font-medium">Başarısız</p>
                                            <p class="text-xl font-bold text-red-700 dark:text-red-300" id="failedSignals">0</p>
                                        </div>
                                        <div class="w-8 h-8 bg-red-100 dark:bg-red-800 rounded-full flex items-center justify-center">
                                            <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-800">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-xs text-blue-600 dark:text-blue-400 font-medium">Confluence</p>
                                            <p class="text-xl font-bold text-blue-700 dark:text-blue-300" id="confluenceSignals">0</p>
                                        </div>
                                        <div class="w-8 h-8 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center">
                                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-primary/10 dark:bg-primary/20 rounded-lg p-3 border border-primary/30">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-xs text-primary font-medium">Strategy Accuracy</p>
                                            <p class="text-xl font-bold text-primary" id="winRate">0%</p>
                                        </div>
                                        <div class="w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center">
                                            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- PnL Section -->
                            <div class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600">
                                <div class="text-center">
                                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">A01+A02 Toplam P&L</p>
                                    <p class="text-2xl font-bold" id="totalPnL">$0.00</p>
                                    <div class="mt-2 h-2 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden">
                                        <div class="h-full bg-gradient-to-r from-green-500 to-primary rounded-full transition-all duration-300" id="pnlProgressBar" style="width: 50%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Technical Indicators Settings -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-4 rounded-t-xl">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                                    </svg>
                                    Advanced Strategies
                                </h3>
                                <div class="flex flex-wrap gap-1" id="activeIndicatorsBadges">
                                    <span class="px-2 py-1 bg-white/20 text-white text-xs rounded-full">EMA Cross</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 space-y-4">
                            <!-- Multi-Timeframe Analysis -->
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg p-4 mb-4">
                                <h4 class="text-sm font-bold text-blue-900 dark:text-blue-300 mb-2">🕐 Çoklu Zaman Dilimi Analizi</h4>
                                <div class="grid grid-cols-3 gap-2 text-xs">
                                    <div class="text-center">
                                        <div class="bg-green-100 dark:bg-green-900 rounded p-2">
                                            <div class="font-semibold text-green-800 dark:text-green-300">HTF</div>
                                            <div class="text-green-600 dark:text-green-400">1H-4H</div>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="bg-blue-100 dark:bg-blue-900 rounded p-2">
                                            <div class="font-semibold text-blue-800 dark:text-blue-300">MTF</div>
                                            <div class="text-blue-600 dark:text-blue-400">15M-30M</div>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="bg-orange-100 dark:bg-orange-900 rounded p-2">
                                            <div class="font-semibold text-orange-800 dark:text-orange-300">LTF</div>
                                            <div class="text-orange-600 dark:text-orange-400">3M-5M</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- EMA Cross Strategy -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-800 dark:text-gray-200 flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                        EMA Cross Strategy (5-14)
                                    </label>
                                    <div class="relative">
                                        <input type="checkbox" id="emaEnabled" checked class="sr-only">
                                        <div class="toggle-switch w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner cursor-pointer active" onclick="toggleIndicator('ema')">
                                            <div class="toggle-dot absolute w-4 h-4 bg-white rounded-full shadow top-1 left-1 transition-transform duration-200 ease-in-out" style="transform: translateX(20px)"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3" id="emaSettings">
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">EMA Cross (5-14)</label>
                                        <input type="range" id="emaShortRange" min="5" max="15" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="emaShortValue">5</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Long Period</label>
                                        <input type="range" id="emaLongRange" min="10" max="50" value="14" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="emaLongValue">14</div>
                                    </div>
                                    <div class="col-span-2">
                                        <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded p-2 text-xs">
                                            <span class="text-yellow-800 dark:text-yellow-300">💡 15M'de sinyal hattı ana çalışma frame'i</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- RSI Heat Map (A01 Strategy) -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-800 dark:text-gray-200 flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4"></path>
                                        </svg>
                                        RSI Heat Map (A01 Strategy)
                                    </label>
                                    <div class="relative">
                                        <input type="checkbox" id="rsiEnabled" class="sr-only">
                                        <div class="toggle-switch w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner cursor-pointer" onclick="toggleIndicator('rsi')">
                                            <div class="toggle-dot absolute w-4 h-4 bg-white rounded-full shadow top-1 left-1 transition-transform duration-200 ease-in-out"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3" id="rsiSettings" style="display: none;">
                                    <div class="col-span-2 mb-3">
                                        <div class="strategy-a01 rounded-lg p-3 text-white">
                                            <h5 class="text-sm font-semibold mb-2">🎯 A01 Strategy</h5>
                                            <p class="text-xs opacity-90">RSI 21-34 SMA, 50 bandı trend kontrolü</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">RSI Period</label>
                                        <input type="range" id="rsiPeriod" min="14" max="34" value="21" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="rsiPeriodValue">21</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">SMA Period</label>
                                        <input type="range" id="rsiSmaPeriod" min="21" max="55" value="34" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="rsiSmaPeriodValue">34</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Aşırı Satış</label>
                                        <input type="range" id="rsiOversold" min="15" max="35" value="25" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="rsiOversoldValue">25</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Aşırı Alım</label>
                                        <input type="range" id="rsiOverbought" min="65" max="85" value="75" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="rsiOverboughtValue">75</div>
                                    </div>
                                    <div class="col-span-2">
                                        <div class="flex items-center space-x-4 text-xs">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded mr-1"></div>
                                                <span>RSI > 50 (Trend Devam)</span>
                                            </div>
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-red-500 rounded mr-1"></div>
                                                <span>RSI < 50 (Trend Zayıf)</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AO - Awesome Oscillator (A02 Strategy) -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-800 dark:text-gray-200 flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                        </svg>
                                        AO - Awesome Oscillator (A02)
                                    </label>
                                    <div class="relative">
                                        <input type="checkbox" id="aoEnabled" class="sr-only">
                                        <div class="toggle-switch w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner cursor-pointer" onclick="toggleIndicator('ao')">
                                            <div class="toggle-dot absolute w-4 h-4 bg-white rounded-full shadow top-1 left-1 transition-transform duration-200 ease-in-out"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3" id="aoSettings" style="display: none;">
                                    <div class="col-span-2 mb-3">
                                        <div class="strategy-a02 rounded-lg p-3 text-white">
                                            <h5 class="text-sm font-semibold mb-2">🔄 A02 Strategy</h5>
                                            <p class="text-xs opacity-90">Uyumsuzluk ve momentum dönüş sinyalleri</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Fast SMA</label>
                                        <input type="range" id="aoFastSma" min="3" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="aoFastSmaValue">5</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Slow SMA</label>
                                        <input type="range" id="aoSlowSma" min="30" max="40" value="34" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="aoSlowSmaValue">34</div>
                                    </div>
                                    <div class="col-span-2">
                                        <label class="flex items-center text-xs">
                                            <input type="checkbox" id="aoDivergenceDetection" checked class="mr-2">
                                            <span>Uyumsuzluk Tespiti Aktif</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- EOM - Ease of Movement -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-800 dark:text-gray-200 flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4"></path>
                                        </svg>
                                        EOM - Ease of Movement
                                    </label>
                                    <div class="relative">
                                        <input type="checkbox" id="eomEnabled" class="sr-only">
                                        <div class="toggle-switch w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner cursor-pointer" onclick="toggleIndicator('eom')">
                                            <div class="toggle-dot absolute w-4 h-4 bg-white rounded-full shadow top-1 left-1 transition-transform duration-200 ease-in-out"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3" id="eomSettings" style="display: none;">
                                    <div class="col-span-2 mb-3">
                                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3">
                                            <h5 class="text-sm font-semibold text-green-900 dark:text-green-300 mb-2">📈 EOM Strategy</h5>
                                            <p class="text-xs text-green-800 dark:text-green-300">0 bandının üstünde kalma kontrolü</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Period</label>
                                        <input type="range" id="eomPeriod" min="10" max="30" value="14" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="eomPeriodValue">14</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Scale Factor</label>
                                        <input type="range" id="eomScale" min="1000" max="10000" step="1000" value="1000" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="eomScaleValue">1000</div>
                                    </div>
                                </div>
                            </div>

                            <!-- SMI - Stochastic Momentum Index -->
                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-800 dark:text-gray-200 flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                        SMI - Stochastic Momentum Index
                                    </label>
                                    <div class="relative">
                                        <input type="checkbox" id="smiEnabled" class="sr-only">
                                        <div class="toggle-switch w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner cursor-pointer" onclick="toggleIndicator('smi')">
                                            <div class="toggle-dot absolute w-4 h-4 bg-white rounded-full shadow top-1 left-1 transition-transform duration-200 ease-in-out"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-3 gap-3" id="smiSettings" style="display: none;">
                                    <div class="col-span-3 mb-3">
                                        <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-3">
                                            <h5 class="text-sm font-semibold text-indigo-900 dark:text-indigo-300 mb-2">🎲 SMI Strategy</h5>
                                            <p class="text-xs text-indigo-800 dark:text-indigo-300">3M'de sinyal, momentum takibi</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">%K Period</label>
                                        <input type="range" id="smiKPeriod" min="5" max="20" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="smiKPeriodValue">10</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">%D Period</label>
                                        <input type="range" id="smiDPeriod" min="3" max="10" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="smiDPeriodValue">3</div>
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">Smoothing</label>
                                        <input type="range" id="smiSmoothing" min="3" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                        <div class="text-center text-xs text-gray-500 mt-1" id="smiSmoothingValue">5</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Apply Settings Button -->
                            <div class="pt-3 border-t border-gray-200 dark:border-gray-700">
                                <button id="applyIndicatorSettings" class="w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-black font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z"></path>
                                    </svg>
                                    <span>A01+A02 Stratejileri Uygula</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Latest Signal Enhanced -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="bg-gradient-to-r from-green-500 to-emerald-600 p-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Son Advanced Sinyal
                                </h3>
                                <div class="flex space-x-2">
                                    <button id="signalAlertBtn" class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center space-x-1" title="Sinyal Alarmı">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5A2.5 2.5 0 0 1 4 16.5v-9A2.5 2.5 0 0 1 6.5 5h11A2.5 2.5 0 0 1 20 7.5v4"></path>
                                        </svg>
                                        <span>Alarm</span>
                                    </button>
                                    <button id="shareSignalBtn" class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-sm transition-colors flex items-center space-x-1" title="Paylaş">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                        </svg>
                                        <span>Share</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div id="latestSignalCombined" class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <div class="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                </div>
                                <p class="text-lg font-semibold">Henüz A01+A02 sinyali yok</p>
                                <p class="text-sm">İlk confluence sinyal geldiğinde burada görünecek</p>
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Signal History -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="bg-gradient-to-r from-purple-500 to-indigo-600 p-4">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-bold text-white flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    Advanced Signal Geçmişi
                                </h3>
                                <div class="flex space-x-2">
                                    <select id="signalFilter" class="bg-white/20 border-none text-white text-sm px-3 py-1 rounded-lg focus:ring-2 focus:ring-white/50">
                                        <option value="all" class="text-gray-900">Tümü</option>
                                        <option value="buy" class="text-gray-900">AL</option>
                                        <option value="sell" class="text-gray-900">SAT</option>
                                        <option value="confluence" class="text-gray-900">Confluence</option>
                                        <option value="today" class="text-gray-900">Bugün</option>
                                    </select>
                                    <button id="clearHistoryBtn" class="bg-red-500/80 hover:bg-red-500 text-white px-3 py-1 rounded-lg text-sm transition-colors">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                    Temizle
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4">
                            <div id="combinedSignalHistory" class="space-y-3 max-h-80 overflow-y-auto custom-scrollbar">
                                <!-- Combined signals will be added here -->
                            </div>
                            <div id="noSignalsMessage" class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <div class="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                </div>
                                <p class="text-lg font-semibold">Henüz advanced sinyal yok</p>
                                <p class="text-sm">İlk confluence sinyal geldiğinde burada görünecek</p>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Price Alerts -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                        <div class="bg-gradient-to-r from-orange-500 to-red-500 p-4">
                            <h3 class="text-lg font-bold text-white flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                            Smart Price Alerts
                            </h3>
                        </div>
                        
                        <div class="p-4 space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <select id="alertSymbol" class="px-4 py-3 text-base border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                                    <option value="btcusdt">BTC/USDT</option>
                                    <option value="ethusdt">ETH/USDT</option>
                                    <option value="solusdt">SOL/USDT</option>
                                    <option value="adausdt">ADA/USDT</option>
                                </select>
                                <input type="number" id="alertPrice" placeholder="Hedef fiyat girin" class="px-4 py-3 text-base border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent transition-all">
                                <button id="addAlertBtn" class="px-6 py-3 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-black font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    <span>Alarm Ekle</span>
                                </button>
                            </div>
                            
                            <div id="activeAlerts" class="space-y-3 max-h-40 overflow-y-auto custom-scrollbar">
                                <!-- Active alerts will be shown here -->
                            </div>
                            
                            <div id="noAlertsMessage" class="text-center py-6 text-gray-500 dark:text-gray-400">
                                <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5A2.5 2.5 0 0 1 4 16.5v-9A2.5 2.5 0 0 1 6.5 5h11A2.5 2.5 0 0 1 20 7.5v4"></path>
                                    </svg>
                                </div>
                                <p class="text-sm">Henüz alarm yok</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation for Mobile -->
        <nav class="md:hidden fixed bottom-0 left-0 right-0 bottom-nav border-t border-gray-200 dark:border-gray-700 px-4 py-2 z-30">
            <div class="flex justify-around items-center">
                <button class="nav-item flex flex-col items-center space-y-1 p-2 rounded-lg" data-tab="pairs">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="text-xs">Çiftler</span>
                </button>
                
                <button class="nav-item flex flex-col items-center space-y-1 p-2 rounded-lg" data-tab="signals">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-xs">A01+A02</span>
                </button>
                
                <button class="nav-item flex flex-col items-center space-y-1 p-2 rounded-lg" data-tab="charts">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="text-xs">Grafik</span>
                </button>
                
                <button class="nav-item flex flex-col items-center space-y-1 p-2 rounded-lg" data-tab="portfolio">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <span class="text-xs">Portföy</span>
                </button>
            </div>
        </nav>

        <!-- Portfolio Modal -->
        <div id="portfolioModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md border border-gray-200 dark:border-gray-700 max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold">💼 Advanced Portfolio</h3>
                        <button id="closePortfolioModal" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900 dark:to-blue-900 rounded-lg p-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold" id="portfolioValue">$0.00</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Toplam A01+A02 Değer</div>
                                <div class="text-lg font-semibold mt-2" id="portfolioPnL">+$0.00 (0%)</div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <h4 class="font-semibold">Pozisyonlar</h4>
                            <div id="portfolioPositions" class="space-y-2">
                                <!-- Portfolio positions will be shown here -->
                            </div>
                            
                            <button id="addPositionBtn" class="w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 hover:border-primary hover:text-primary transition-colors">
                                + Advanced Pozisyon Ekle
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Toast Enhanced -->
        <div id="notificationToast" class="fixed top-4 right-4 transform translate-x-full transition-transform duration-300 z-50">
            <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4 min-w-80 max-w-sm">
                <div class="flex items-start">
                    <div id="toastIcon" class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                        <span class="text-white font-bold text-sm"></span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div id="toastTitle" class="font-semibold"></div>
                        <div id="toastMessage" class="text-sm text-gray-600 dark:text-gray-400 break-words"></div>
                        <div id="toastTime" class="text-xs text-gray-400 mt-1"></div>
                    </div>
                    <button id="dismissToast" class="flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Pull to Refresh Indicator -->
        <div id="pullToRefresh" class="hidden fixed top-16 left-1/2 transform -translate-x-1/2 bg-primary text-white px-4 py-2 rounded-full text-sm z-40 animate-bounce flex items-center space-x-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
            </svg>
            <span>A01+A02 yenileniyor</span>
        </div>
    </div>

    <script>
        // Enhanced Theme Management
        function initializeTheme() {
            const savedTheme = localStorage.getItem('cryptoAdvancedTheme');
            if (savedTheme) {
                document.documentElement.classList.toggle('dark', savedTheme === 'dark');
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
            
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (!localStorage.getItem('cryptoAdvancedTheme')) {
                    document.documentElement.classList.toggle('dark', event.matches);
                }
            });
        }

        function toggleTheme() {
            const isDark = document.documentElement.classList.contains('dark');
            document.documentElement.classList.toggle('dark', !isDark);
            localStorage.setItem('cryptoAdvancedTheme', !isDark ? 'dark' : 'light');
        }

        // Advanced Technical Indicators Calculator
        class TechnicalIndicators {
            // RSI Heat Map Calculation (A01 Strategy)
            static calculateRSI(prices, period = 21) {
                if (prices.length < period + 1) return null;
                
                let gains = 0;
                let losses = 0;
                
                // Calculate initial gains and losses
                for (let i = 1; i <= period; i++) {
                    const change = prices[i] - prices[i - 1];
                    if (change > 0) {
                        gains += change;
                    } else {
                        losses -= change;
                    }
                }
                
                let avgGain = gains / period;
                let avgLoss = losses / period;
                
                // Calculate subsequent RSI values
                for (let i = period + 1; i < prices.length; i++) {
                    const change = prices[i] - prices[i - 1];
                    const gain = Math.max(change, 0);
                    const loss = Math.max(-change, 0);
                    
                    avgGain = ((avgGain * (period - 1)) + gain) / period;
                    avgLoss = ((avgLoss * (period - 1)) + loss) / period;
                }
                
                if (avgLoss === 0) return 100;
                const rs = avgGain / avgLoss;
                return 100 - (100 / (1 + rs));
            }

            // Awesome Oscillator (A02 Strategy)
            static calculateAO(highs, lows, fastSMA = 5, slowSMA = 34) {
                if (highs.length < slowSMA || lows.length < slowSMA) return null;
                
                const medianPrices = highs.map((high, i) => (high + lows[i]) / 2);
                
                const fastMA = this.calculateSMA(medianPrices, fastSMA);
                const slowMA = this.calculateSMA(medianPrices, slowSMA);
                
                if (!fastMA || !slowMA) return null;
                return fastMA - slowMA;
            }

            // Ease of Movement (EOM)
            static calculateEOM(highs, lows, volumes, period = 14, scale = 1000) {
                if (highs.length < 2 || volumes.length < 2) return null;
                
                const distanceMoved = (highs[highs.length - 1] + lows[lows.length - 1]) / 2 - 
                                    (highs[highs.length - 2] + lows[lows.length - 2]) / 2;
                
                const highLowRange = highs[highs.length - 1] - lows[lows.length - 1];
                const boxHeight = volumes[volumes.length - 1] / scale / highLowRange;
                
                if (boxHeight === 0) return 0;
                return distanceMoved / boxHeight;
            }

            // Stochastic Momentum Index (SMI)
            static calculateSMI(highs, lows, closes, kPeriod = 10, dPeriod = 3, smoothing = 5) {
                if (closes.length < kPeriod) return { smiK: null, smiD: null };
                
                const recentCloses = closes.slice(-kPeriod);
                const recentHighs = highs.slice(-kPeriod);
                const recentLows = lows.slice(-kPeriod);
                
                const highestHigh = Math.max(...recentHighs);
                const lowestLow = Math.min(...recentLows);
                const currentClose = closes[closes.length - 1];
                
                const midpoint = (highestHigh + lowestLow) / 2;
                const distance = currentClose - midpoint;
                const range = (highestHigh - lowestLow) / 2;
                
                if (range === 0) return { smiK: 0, smiD: 0 };
                
                const smiK = (distance / range) * 100;
                
                // Simple moving average for %D
                const smiD = this.calculateSMA([smiK], dPeriod) || smiK;
                
                return { smiK, smiD };
            }

            // Simple Moving Average
            static calculateSMA(data, period) {
                if (data.length < period) return null;
                const slice = data.slice(-period);
                return slice.reduce((sum, val) => sum + val, 0) / period;
            }

            // Exponential Moving Average
            static calculateEMA(data, period) {
                if (data.length < period) return null;
                
                const multiplier = 2 / (period + 1);
                let ema = data[0];
                
                for (let i = 1; i < data.length; i++) {
                    ema = (data[i] * multiplier) + (ema * (1 - multiplier));
                }
                
                return ema;
            }

            // Divergence Detection for AO
            static detectDivergence(priceData, aoData, lookback = 5) {
                if (priceData.length < lookback * 2 || aoData.length < lookback * 2) return false;
                
                const recentPrices = priceData.slice(-lookback);
                const recentAO = aoData.slice(-lookback);
                const olderPrices = priceData.slice(-lookback * 2, -lookback);
                const olderAO = aoData.slice(-lookback * 2, -lookback);
                
                const recentPriceHigh = Math.max(...recentPrices);
                const recentAOHigh = Math.max(...recentAO);
                const olderPriceHigh = Math.max(...olderPrices);
                const olderAOHigh = Math.max(...olderAO);
                
                // Bearish divergence: price makes higher high, AO makes lower high
                const bearishDivergence = recentPriceHigh > olderPriceHigh && recentAOHigh < olderAOHigh;
                
                const recentPriceLow = Math.min(...recentPrices);
                const recentAOLow = Math.min(...recentAO);
                const olderPriceLow = Math.min(...olderPrices);
                const olderAOLow = Math.min(...olderAO);
                
                // Bullish divergence: price makes lower low, AO makes higher low
                const bullishDivergence = recentPriceLow < olderPriceLow && recentAOLow > olderAOLow;
                
                return { bearish: bearishDivergence, bullish: bullishDivergence };
            }
        }

        // Enhanced Audio System with advanced sounds
        class EnhancedAudioSystem {
            constructor() {
                this.audioContext = null;
                this.soundEnabled = true;
                this.sounds = {
                    buy: { frequency: 800, duration: 0.3 },
                    sell: { frequency: 400, duration: 0.3 },
                    alert: { frequency: 1000, duration: 0.1, repeat: 3 },
                    confluence: { frequency: 1200, duration: 0.2, repeat: 2 },
                    a01: { frequency: 900, duration: 0.25 },
                    a02: { frequency: 700, duration: 0.25 }
                };
                this.initAudio();
            }

            async initAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }

            playSignalSound(type = 'buy', strategy = null) {
                if (!this.soundEnabled || !this.audioContext) return;

                let soundType = type.toLowerCase();
                if (strategy === 'a01') soundType = 'a01';
                else if (strategy === 'a02') soundType = 'a02';
                else if (strategy === 'confluence') soundType = 'confluence';

                const sound = this.sounds[soundType] || this.sounds.buy;
                const repeat = sound.repeat || 1;

                for (let i = 0; i < repeat; i++) {
                    setTimeout(() => {
                        this.generateTone(sound.frequency, sound.duration);
                    }, i * (sound.duration * 1000 + 100));
                }
            }

            generateTone(frequency, duration) {
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, this.audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);

                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration);
            }

            toggleSound() {
                this.soundEnabled = !this.soundEnabled;
                return this.soundEnabled;
            }
        }

        // Enhanced Real-time Price Chart with advanced indicators
        class AdvancedRealTimePriceChart {
            constructor() {
                this.currentSymbol = 'btcusdt';
                this.currentInterval = '3m';
                this.chart = null;
                this.ws = null;
                this.priceData = [];
                this.timeLabels = [];
                this.maxDataPoints = 100;
                this.lastPrice = 0;
                
                this.initChart();
                this.bindEvents();
                this.connectWebSocket();
            }

            initChart() {
                const ctx = document.getElementById('priceChart').getContext('2d');
                const isDark = document.documentElement.classList.contains('dark');
                
                this.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: 'Price',
                                data: [],
                                borderColor: '#5D5CDE',
                                backgroundColor: 'rgba(93, 92, 222, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                                pointRadius: 0,
                                pointHoverRadius: 4
                            },
                            {
                                label: 'EMA 5',
                                data: [],
                                borderColor: '#10B981',
                                backgroundColor: 'transparent',
                                borderWidth: 1,
                                pointRadius: 0,
                                tension: 0.4
                            },
                            {
                                label: 'EMA 14',
                                data: [],
                                borderColor: '#EF4444',
                                backgroundColor: 'transparent',
                                borderWidth: 1,
                                pointRadius: 0,
                                tension: 0.4
                            },
                            {
                                label: 'RSI Signal',
                                data: [],
                                borderColor: '#F59E0B',
                                backgroundColor: 'transparent',
                                borderWidth: 1,
                                pointRadius: 2,
                                tension: 0.4,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    color: isDark ? '#ffffff' : '#000000',
                                    usePointStyle: true,
                                    padding: 20
                                }
                            },
                            tooltip: {
                                backgroundColor: isDark ? '#1f2937' : '#ffffff',
                                titleColor: isDark ? '#ffffff' : '#000000',
                                bodyColor: isDark ? '#ffffff' : '#000000',
                                borderColor: isDark ? '#374151' : '#e5e7eb',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                display: true,
                                grid: {
                                    color: isDark ? 'rgba(107, 114, 128, 0.1)' : 'rgba(107, 114, 128, 0.1)'
                                },
                                ticks: {
                                    color: isDark ? '#9ca3af' : '#6b7280',
                                    maxTicksLimit: 8
                                }
                            },
                            y: {
                                display: true,
                                position: 'right',
                                grid: {
                                    color: isDark ? 'rgba(107, 114, 128, 0.1)' : 'rgba(107, 114, 128, 0.1)'
                                },
                                ticks: {
                                    color: isDark ? '#9ca3af' : '#6b7280',
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: false,
                                position: 'left',
                                min: 0,
                                max: 100,
                                grid: {
                                    drawOnChartArea: false,
                                },
                            }
                        },
                        animation: {
                            duration: 0 // Disable animation for real-time updates
                        }
                    }
                });
            }

            bindEvents() {
                document.getElementById('chartSymbol').addEventListener('change', (e) => {
                    this.currentSymbol = e.target.value;
                    this.reconnect();
                });

                document.getElementById('chartInterval').addEventListener('change', (e) => {
                    this.currentInterval = e.target.value;
                    this.reconnect();
                });

                document.getElementById('refreshChart').addEventListener('click', () => {
                    this.reconnect();
                });
                
                // Chart type switcher
                document.getElementById('chartType').addEventListener('change', (e) => {
                    this.switchChartType(e.target.value);
                });
            }

            connectWebSocket() {
                this.updateStatus('connecting');
                
                if (this.ws) {
                    this.ws.close();
                }

                const stream = `${this.currentSymbol}@kline_${this.currentInterval}`;
                this.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${stream}`);

                this.ws.onopen = () => {
                    this.updateStatus('connected');
                    console.log(`Advanced chart connected to ${this.currentSymbol.toUpperCase()}`);
                };

                this.ws.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    this.handleKlineData(data);
                };

                this.ws.onerror = () => {
                    this.updateStatus('error');
                };

                this.ws.onclose = () => {
                    this.updateStatus('disconnected');
                    setTimeout(() => this.connectWebSocket(), 5000);
                };
            }

            handleKlineData(data) {
                if (!data.k) return;

                const kline = data.k;
                const price = parseFloat(kline.c);
                const high = parseFloat(kline.h);
                const low = parseFloat(kline.l);
                const volume = parseFloat(kline.v);
                const time = new Date(kline.t).toLocaleTimeString('tr-TR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });

                // Update price change
                const priceChange = this.lastPrice > 0 ? ((price - this.lastPrice) / this.lastPrice) * 100 : 0;
                this.lastPrice = price;

                // Add new data point
                this.priceData.push(price);
                this.timeLabels.push(time);

                // Calculate advanced EMAs (5-14 cross)
                const ema5 = this.calculateEMA(this.priceData, 5);
                const ema14 = this.calculateEMA(this.priceData, 14);
                
                // Calculate RSI for A01 strategy
                const rsi = this.calculateRSI(this.priceData, 21);

                // Remove old data points
                if (this.priceData.length > this.maxDataPoints) {
                    this.priceData.shift();
                    this.timeLabels.shift();
                }

                // Update chart
                this.chart.data.labels = this.timeLabels;
                this.chart.data.datasets[0].data = this.priceData;
                this.chart.data.datasets[1].data = this.priceData.map(() => ema5);
                this.chart.data.datasets[2].data = this.priceData.map(() => ema14);
                this.chart.data.datasets[3].data = this.priceData.map(() => rsi);
                
                // Update label with current price and change
                const changeColor = priceChange >= 0 ? '#10B981' : '#EF4444';
                const changeSymbol = priceChange >= 0 ? '+' : '';
                this.chart.data.datasets[0].label = `${this.currentSymbol.toUpperCase()} - $${price.toLocaleString()} (${changeSymbol}${priceChange.toFixed(2)}%)`;
                this.chart.data.datasets[0].borderColor = changeColor;
                
                this.chart.update('none');
            }

            calculateEMA(data, period) {
                if (data.length < period) return data[data.length - 1] || 0;
                
                const multiplier = 2 / (period + 1);
                let ema = data[0];

                for (let i = 1; i < data.length; i++) {
                    ema = (data[i] * multiplier) + (ema * (1 - multiplier));
                }

                return ema;
            }

            calculateRSI(prices, period = 21) {
                if (prices.length < period + 1) return 50;
                
                let gains = 0;
                let losses = 0;
                
                for (let i = 1; i <= period; i++) {
                    const change = prices[prices.length - i] - prices[prices.length - i - 1];
                    if (change > 0) {
                        gains += change;
                    } else {
                        losses -= change;
                    }
                }
                
                const avgGain = gains / period;
                const avgLoss = losses / period;
                
                if (avgLoss === 0) return 100;
                const rs = avgGain / avgLoss;
                return 100 - (100 / (1 + rs));
            }

            updateStatus(status) {
                const statusEl = document.getElementById('chartStatus');
                if (!statusEl) return;

                const statusConfig = {
                    connecting: { text: 'CONNECTING', class: 'bg-yellow-100 dark:bg-yellow-900 text-yellow-600' },
                    connected: { text: 'LIVE', class: 'bg-green-100 dark:bg-green-900 text-green-600' },
                    error: { text: 'ERROR', class: 'bg-red-100 dark:bg-red-900 text-red-600' },
                    disconnected: { text: 'OFFLINE', class: 'bg-gray-100 dark:bg-gray-900 text-gray-600' }
                };

                const config = statusConfig[status];
                statusEl.textContent = config.text;
                statusEl.className = `ml-2 px-2 py-1 text-xs rounded-full ${config.class}`;
            }

            updateTheme() {
                const isDark = document.documentElement.classList.contains('dark');
                
                this.chart.options.plugins.legend.labels.color = isDark ? '#ffffff' : '#000000';
                this.chart.options.plugins.tooltip.backgroundColor = isDark ? '#1f2937' : '#ffffff';
                this.chart.options.plugins.tooltip.titleColor = isDark ? '#ffffff' : '#000000';
                this.chart.options.plugins.tooltip.bodyColor = isDark ? '#ffffff' : '#000000';
                this.chart.options.plugins.tooltip.borderColor = isDark ? '#374151' : '#e5e7eb';
                
                this.chart.options.scales.x.ticks.color = isDark ? '#9ca3af' : '#6b7280';
                this.chart.options.scales.y.ticks.color = isDark ? '#9ca3af' : '#6b7280';
                
                this.chart.update();
                
                // Update TradingView widget if active
                if (document.getElementById('chartType').value === 'tradingview') {
                    this.loadTradingViewWidget();
                }
            }

            switchChartType(type) {
                const customContainer = document.getElementById('customChartContainer');
                const tradingViewContainer = document.getElementById('tradingViewContainer');
                
                if (type === 'tradingview') {
                    customContainer.style.display = 'none';
                    tradingViewContainer.style.display = 'block';
                    this.loadTradingViewWidget();
                } else {
                    customContainer.style.display = 'block';
                    tradingViewContainer.style.display = 'none';
                    this.reconnect();
                }
            }

            loadTradingViewWidget() {
                const container = document.getElementById('tradingview_widget');
                const isDark = document.documentElement.classList.contains('dark');
                
                // Clear existing widget
                container.innerHTML = '';
                
                // Create TradingView widget script
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js';
                script.async = true;
                
                // Convert symbol format for TradingView
                const tvSymbol = this.convertSymbolForTradingView(this.currentSymbol);
                
                // Widget configuration
                const config = {
                    autosize: true,
                    symbol: tvSymbol,
                    interval: this.convertIntervalForTradingView(this.currentInterval),
                    timezone: "Etc/UTC",
                    theme: isDark ? "dark" : "light",
                    style: "1",
                    locale: "en",
                    backgroundColor: isDark ? "#1f2937" : "#ffffff",
                    gridColor: isDark ? "rgba(255, 255, 255, 0.06)" : "rgba(46, 46, 46, 0.06)",
                    allow_symbol_change: true,
                    calendar: false,
                    details: false,
                    hide_side_toolbar: false,
                    hide_top_toolbar: false,
                    hide_legend: false,
                    hide_volume: false,
                    hotlist: false,
                    save_image: true,
                    withdateranges: false,
                    compareSymbols: [],
                    studies: ["RSI@tv-basicstudies", "MACD@tv-basicstudies"],
                    watchlist: []
                };
                
                script.innerHTML = JSON.stringify(config);
                container.appendChild(script);
            }

            convertSymbolForTradingView(symbol) {
                const symbolMap = {
                    'btcusdt': 'BINANCE:BTCUSDT',
                    'ethusdt': 'BINANCE:ETHUSDT',
                    'adausdt': 'BINANCE:ADAUSDT',
                    'bnbusdt': 'BINANCE:BNBUSDT',
                    'solusdt': 'BINANCE:SOLUSDT',
                    'dogeusdt': 'BINANCE:DOGEUSDT',
                    'xrpusdt': 'BINANCE:XRPUSDT',
                    'avaxusdt': 'BINANCE:AVAXUSDT',
                    'dotusdt': 'BINANCE:DOTUSDT',
                    'maticusdt': 'BINANCE:MATICUSDT',
                    'linkusdt': 'BINANCE:LINKUSDT',
                    'ltcusdt': 'BINANCE:LTCUSDT'
                };
                
                return symbolMap[symbol.toLowerCase()] || `BINANCE:${symbol.toUpperCase()}`;
            }

            convertIntervalForTradingView(interval) {
                const intervalMap = {
                    '1m': '1',
                    '3m': '3',
                    '5m': '5',
                    '15m': '15',
                    '30m': '30',
                    '1h': '60',
                    '4h': '240',
                    '1d': 'D'
                };
                
                return intervalMap[interval] || '5';
            }

            reconnect() {
                this.priceData = [];
                this.timeLabels = [];
                this.chart.data.labels = [];
                this.chart.data.datasets.forEach(dataset => dataset.data = []);
                this.chart.update();
                this.connectWebSocket();
            }

            disconnect() {
                if (this.ws) {
                    this.ws.close();
                    this.ws = null;
                }
            }
        }

        // Advanced Multi-Pair Trading Signals System with A01 & A02 Strategies
        class AdvancedMultiPairTradingSignals {
            constructor() {
                this.pairs = new Map();
                this.allSignals = [];
                this.alerts = [];
                this.portfolio = [];
                this.notificationsEnabled = false;
                this.soundEnabled = true;
                this.signalStats = { 
                    buy: 0, 
                    sell: 0, 
                    successful: 0, 
                    failed: 0, 
                    pending: 0,
                    confluence: 0,
                    totalPnL: 0
                };
                this.marketData = {};
                this.currentFilter = 'all';
                
                this.audioSystem = new EnhancedAudioSystem();
                
                this.bindEvents();
                this.loadStoredData();
                this.updateUI();
                this.startMarketDataUpdates();
                this.initPWA();
            }

            bindEvents() {
                // Existing event bindings
                document.getElementById('addPairBtn').addEventListener('click', () => this.addPair());
                document.getElementById('addCustomPairBtn').addEventListener('click', () => this.addCustomPair());
                document.getElementById('clearAllBtn').addEventListener('click', () => this.clearAllPairs());
                
                // Theme toggles
                document.getElementById('themeToggle').addEventListener('click', toggleTheme);
                document.getElementById('mobileThemeToggle').addEventListener('click', toggleTheme);
                
                // Sound toggles
                document.getElementById('soundToggle').addEventListener('click', () => this.toggleSound());
                document.getElementById('mobileSoundToggle').addEventListener('click', () => this.toggleSound());
                
                // Notification toggles
                document.getElementById('notificationBtn').addEventListener('click', () => this.enableNotifications());
                document.getElementById('mobileNotificationBtn').addEventListener('click', () => this.enableNotifications());
                
                // Portfolio buttons
                document.getElementById('portfolioBtn').addEventListener('click', () => this.openPortfolioModal());
                document.getElementById('mobilePortfolioBtn').addEventListener('click', () => this.openPortfolioModal());
                document.getElementById('closePortfolioModal').addEventListener('click', () => this.closePortfolioModal());
                
                // Mobile menu
                document.getElementById('mobileMenuBtn').addEventListener('click', () => this.toggleMobileMenu());
                
                // Quick add buttons
                document.querySelectorAll('.quick-add-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const symbol = e.target.dataset.symbol;
                        document.getElementById('symbolSelect').value = symbol;
                        this.addPair();
                    });
                });
                
                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.currentFilter = e.target.dataset.filter;
                        this.updateFilterButtons();
                        this.filterPairs();
                    });
                });
                
                // Enhanced features
                document.getElementById('presetPairsBtn').addEventListener('click', () => this.addPresetPairs());
                document.getElementById('sortPairsBtn').addEventListener('click', () => this.sortPairs());
                document.getElementById('exportPairsBtn').addEventListener('click', () => this.exportData());
                document.getElementById('signalFilter').addEventListener('change', (e) => this.filterSignals(e.target.value));
                document.getElementById('clearHistoryBtn').addEventListener('click', () => this.clearSignalHistory());
                document.getElementById('refreshStats').addEventListener('click', () => this.refreshStatistics());
                
                // Price alerts
                document.getElementById('addAlertBtn').addEventListener('click', () => this.addPriceAlert());
                
                // Portfolio management
                document.getElementById('addPositionBtn').addEventListener('click', () => this.addPortfolioPosition());
                
                // Bottom navigation for mobile
                document.querySelectorAll('.nav-item').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchMobileTab(e.currentTarget.dataset.tab);
                    });
                });
                
                // Pull to refresh for mobile
                this.initPullToRefresh();
                
                // Toast dismiss
                document.getElementById('dismissToast').addEventListener('click', () => this.hideToast());
                
                // PWA install
                document.getElementById('installBtn').addEventListener('click', () => this.installPWA());
                document.getElementById('dismissBanner').addEventListener('click', () => this.dismissInstallBanner());
            }

            // Market Data Updates
            async startMarketDataUpdates() {
                this.updateMarketOverview();
                setInterval(() => this.updateMarketOverview(), 30000); // Update every 30 seconds
            }

            async updateMarketOverview() {
                try {
                    // Simulate market data - in real implementation, use actual API
                    const btcData = await this.fetchPriceData('BTCUSDT');
                    const ethData = await this.fetchPriceData('ETHUSDT');
                    
                    this.updateMarketCard('btc', btcData.price, btcData.change);
                    this.updateMarketCard('eth', ethData.price, ethData.change);
                    
                    // Update fear and greed index (simulated)
                    const fearGreed = Math.floor(Math.random() * 100);
                    this.updateFearGreedIndex(fearGreed);
                    
                    // Update signal accuracy
                    this.updateSignalAccuracy();
                    
                } catch (error) {
                    console.error('Market data update failed:', error);
                }
            }

            async fetchPriceData(symbol) {
                try {
                    const response = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${symbol}`);
                    const data = await response.json();
                    
                    return {
                        price: parseFloat(data.lastPrice),
                        change: parseFloat(data.priceChangePercent)
                    };
                } catch (error) {
                    console.error(`Failed to fetch price for ${symbol}:`, error);
                    // Fallback to simulated data
                    const basePrice = symbol === 'BTCUSDT' ? 43000 : 2800;
                    const price = basePrice + (Math.random() - 0.5) * basePrice * 0.05;
                    const change = (Math.random() - 0.5) * 8;
                    
                    return { price, change };
                }
            }

            updateMarketCard(crypto, price, change) {
                const priceEl = document.getElementById(`${crypto}Price`);
                const changeEl = document.getElementById(`${crypto}Change`);
                const trendIconEl = document.getElementById(`${crypto}TrendIcon`);
                const sparklineEl = document.getElementById(`${crypto}Sparkline`);
                
                if (priceEl) {
                    priceEl.textContent = `$${price.toLocaleString()}`;
                    
                    // Add price animation
                    priceEl.classList.add('animate-pulse');
                    setTimeout(() => priceEl.classList.remove('animate-pulse'), 1000);
                }
                
                if (changeEl) {
                    changeEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                    changeEl.className = `text-sm font-bold ${change >= 0 ? 'text-white' : 'text-red-200'}`;
                }
                
                // Update trend icon
                if (trendIconEl) {
                    if (change >= 0) {
                        trendIconEl.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        `;
                    } else {
                        trendIconEl.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6"></path>
                        `;
                    }
                }
                
                // Simple sparkline effect
                if (sparklineEl) {
                    const height = Math.abs(change) * 2;
                    sparklineEl.style.background = `linear-gradient(to top, ${change >= 0 ? '#10B981' : '#EF4444'} ${height}%, transparent ${height}%)`;
                }
            }

            updateFearGreedIndex(value) {
                document.getElementById('fearGreedIndex').textContent = value;
                
                let label, className;
                if (value < 25) {
                    label = 'Extreme Fear';
                    className = 'text-red-600';
                } else if (value < 45) {
                    label = 'Fear';
                    className = 'text-orange-600';
                } else if (value < 55) {
                    label = 'Neutral';
                    className = 'text-white';
                } else if (value < 75) {
                    label = 'Greed';
                    className = 'text-green-200';
                } else {
                    label = 'Extreme Greed';
                    className = 'text-green-100';
                }
                
                const labelEl = document.getElementById('fearGreedLabel');
                labelEl.textContent = label;
                labelEl.className = `text-sm font-bold ${className}`;
                
                // Update progress bar
                const barEl = document.getElementById('fearGreedBar');
                if (barEl) {
                    barEl.style.width = `${value}%`;
                }
            }

            updateSignalAccuracy() {
                const total = this.signalStats.successful + this.signalStats.failed;
                const accuracy = total > 0 ? (this.signalStats.successful / total * 100) : 0;
                
                document.getElementById('signalAccuracy').textContent = `${accuracy.toFixed(1)}%`;
                document.getElementById('totalSignalsCount').textContent = `${total} advanced signals`;
                
                // Update accuracy bar
                const accuracyBarEl = document.getElementById('accuracyBar');
                if (accuracyBarEl) {
                    accuracyBarEl.style.width = `${accuracy}%`;
                }
            }

            // Enhanced Pair Management
            addPair() {
                const symbol = document.getElementById('symbolSelect').value;
                const interval = document.getElementById('intervalSelect').value;
                const emaShort = parseInt(document.getElementById('emaShort').value);
                const emaLong = parseInt(document.getElementById('emaLong').value);

                if (!symbol) {
                    this.showToast('danger', 'Hata!', 'Lütfen bir sembol seçin');
                    return;
                }

                this.addPairToSystem(symbol, interval, emaShort, emaLong);
            }

            addCustomPair() {
                const customSymbol = document.getElementById('customSymbol').value.toLowerCase().trim();
                const interval = document.getElementById('intervalSelect').value;
                const emaShort = parseInt(document.getElementById('emaShort').value);
                const emaLong = parseInt(document.getElementById('emaLong').value);

                if (!customSymbol) {
                    this.showToast('danger', 'Hata!', 'Lütfen bir sembol girin');
                    return;
                }

                this.addPairToSystem(customSymbol, interval, emaShort, emaLong);
                document.getElementById('customSymbol').value = '';
            }

            addPresetPairs() {
                const presets = [
                    { symbol: 'btcusdt', interval: '5m', emaShort: 5, emaLong: 14 },
                    { symbol: 'ethusdt', interval: '5m', emaShort: 5, emaLong: 14 },
                    { symbol: 'solusdt', interval: '3m', emaShort: 5, emaLong: 14 }
                ];

                presets.forEach(preset => {
                    this.addPairToSystem(preset.symbol, preset.interval, preset.emaShort, preset.emaLong);
                });

                this.showToast('success', 'A01+A02 Preset Eklendi!', `${presets.length} advanced çift eklendi`);
            }

            addPairToSystem(symbol, interval, emaShort, emaLong) {
                const pairKey = `${symbol}_${interval}_${emaShort}_${emaLong}`;
                
                if (this.pairs.has(pairKey)) {
                    this.showToast('warning', 'Uyarı!', 'Bu çift zaten eklendi');
                    return;
                }

                const pairTracker = new AdvancedPairTracker(symbol, interval, emaShort, emaLong, this);
                this.pairs.set(pairKey, pairTracker);
                
                this.createPairCard(pairKey, pairTracker);
                this.updateUI();
                this.saveData();
                
                this.showToast('success', 'A01+A02 Eklendi!', `${symbol.toUpperCase()} advanced çifti eklendi`);
            }

            createPairCard(pairKey, pairTracker) {
                const activePairsEl = document.getElementById('activePairs');
                const card = document.createElement('div');
                card.className = 'pair-card mobile-card bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 relative overflow-hidden';
                card.id = `pair_${pairKey}`;

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <h3 class="font-bold text-lg">${pairTracker.symbol.toUpperCase()}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${pairTracker.interval} • EMA ${pairTracker.emaShort}/${pairTracker.emaLong}</p>
                            <div class="flex items-center space-x-2 mt-1">
                                <span class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 rounded-full" id="volume_${pairKey}">Vol: 0</span>
                                <span class="text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-600 rounded-full" id="signals_count_${pairKey}">0 signals</span>
                                <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 rounded-full" id="confluence_count_${pairKey}">0 confluence</span>
                            </div>
                            <div class="mt-2" id="indicators_${pairKey}">
                                <div class="flex flex-wrap gap-1">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                        </svg>
                                        EMA
                                    </span>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300" style="display: none;" data-indicator="rsi">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4"></path>
                                        </svg>
                                        RSI-HM
                                    </span>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300" style="display: none;" data-indicator="ao">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                        </svg>
                                        AO
                                    </span>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300" style="display: none;" data-indicator="eom">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4"></path>
                                        </svg>
                                        EOM
                                    </span>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300" style="display: none;" data-indicator="smi">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                        SMI
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-1">
                            <button onclick="multiPairApp.togglePairAlerts('${pairKey}')" class="p-1 text-yellow-600 hover:text-yellow-700" title="Alarmlar">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path>
                                </svg>
                            </button>
                            <button onclick="multiPairApp.removePair('${pairKey}')" class="p-1 text-red-600 hover:text-red-700" title="Kaldır">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Fiyat:</span>
                            <span class="font-mono font-bold" id="price_${pairKey}">$0.00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>24h Değişim:</span>
                            <span class="font-mono" id="change_${pairKey}">0%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-green-600">EMA ${pairTracker.emaShort}:</span>
                            <span class="font-mono text-green-600" id="ema_short_${pairKey}">$0.00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-red-600">EMA ${pairTracker.emaLong}:</span>
                            <span class="font-mono text-red-600" id="ema_long_${pairKey}">$0.00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>RSI (A01):</span>
                            <span class="font-mono text-blue-600" id="rsi_${pairKey}">50</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>AO (A02):</span>
                            <span class="font-mono text-purple-600" id="ao_${pairKey}">0.00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Durum:</span>
                            <span class="connection-status text-xs" id="status_${pairKey}">
                                <span class="w-2 h-2 bg-yellow-500 rounded-full inline-block"></span>
                                Bağlanıyor...
                            </span>
                        </div>
                        <div class="text-center pt-2 border-t border-gray-200 dark:border-gray-600" id="signal_${pairKey}">
                            <span class="text-xs text-gray-500">A01+A02 sinyal bekleniyor...</span>
                        </div>
                    </div>
                    
                    <!-- Advanced performance indicator -->
                    <div class="absolute top-2 right-2 w-3 h-3 rounded-full performance-neutral" id="performance_${pairKey}" title="Advanced Performance"></div>
                `;

                activePairsEl.appendChild(card);
            }

            // Enhanced Signal Management
            addSignal(signal) {
                signal.id = Date.now() + Math.random();
                signal.status = 'pending';
                signal.timestamp = new Date().toLocaleString('tr-TR');
                
                this.allSignals.unshift(signal);
                
                if (this.allSignals.length > 200) {
                    this.allSignals = this.allSignals.slice(0, 200);
                }

                this.signalStats[signal.type.toLowerCase()]++;
                this.signalStats.pending++;
                
                // Track confluence signals
                if (signal.confluence >= 3) {
                    this.signalStats.confluence++;
                }
                
                // Simulate signal outcome after 5 minutes (for demo)
                setTimeout(() => this.updateSignalOutcome(signal.id), 5 * 60 * 1000);
                
                this.updateCombinedSignalsUI();
                this.showNotification(signal);
                
                // Enhanced sound for confluence signals
                const strategy = signal.confluence >= 3 ? 'confluence' : 
                               signal.indicators && signal.indicators.rsi ? 'a01' :
                               signal.indicators && signal.indicators.ao ? 'a02' : null;
                
                this.playSignalSound(signal.type, strategy);
                this.saveData();
                
                this.showToast(
                    signal.type === 'BUY' ? 'success' : 'danger',
                    `${signal.type} Advanced Sinyal!`,
                    `${signal.symbol} - $${signal.price.toLocaleString()} (${signal.confluence} confluence)`
                );
            }

            updateSignalOutcome(signalId) {
                const signal = this.allSignals.find(s => s.id === signalId);
                if (!signal || signal.status !== 'pending') return;
                
                // Advanced success rate calculation based on confluence
                const baseSuccessRate = 0.6;
                const confluenceBonus = (signal.confluence - 1) * 0.1;
                const successRate = Math.min(0.9, baseSuccessRate + confluenceBonus);
                
                const isSuccessful = Math.random() < successRate;
                const multiplier = signal.confluence >= 3 ? 1.5 : 1.0;
                const pnl = isSuccessful ? 
                    (signal.price * 0.02 * (Math.random() + 0.5) * multiplier) : 
                    -(signal.price * 0.015 * (Math.random() + 0.5));
                
                signal.status = isSuccessful ? 'successful' : 'failed';
                signal.pnl = pnl;
                signal.outcome_time = new Date().toLocaleString('tr-TR');
                
                this.signalStats.pending--;
                this.signalStats[signal.status]++;
                this.signalStats.totalPnL += pnl;
                
                this.updateCombinedSignalsUI();
                this.saveData();
            }

            // Portfolio Management
            openPortfolioModal() {
                document.getElementById('portfolioModal').classList.remove('hidden');
                this.updatePortfolioDisplay();
            }

            closePortfolioModal() {
                document.getElementById('portfolioModal').classList.add('hidden');
            }

            addPortfolioPosition() {
                const symbol = prompt('Sembol girin (örn: BTCUSDT):');
                const quantity = parseFloat(prompt('Miktar girin:'));
                const price = parseFloat(prompt('Giriş fiyatı girin:'));
                
                if (symbol && quantity && price) {
                    this.portfolio.push({
                        id: Date.now(),
                        symbol: symbol.toUpperCase(),
                        quantity,
                        entryPrice: price,
                        currentPrice: price,
                        addedAt: new Date().toISOString(),
                        strategy: 'A01+A02'
                    });
                    
                    this.updatePortfolioDisplay();
                    this.saveData();
                    this.showToast('success', 'Advanced Pozisyon!', `${symbol.toUpperCase()} A01+A02 portföye eklendi`);
                }
            }

            updatePortfolioDisplay() {
                const positionsEl = document.getElementById('portfolioPositions');
                const valueEl = document.getElementById('portfolioValue');
                const pnlEl = document.getElementById('portfolioPnL');
                
                let totalValue = 0;
                let totalPnL = 0;
                
                positionsEl.innerHTML = '';
                
                this.portfolio.forEach(position => {
                    const value = position.quantity * position.currentPrice;
                    const pnl = (position.currentPrice - position.entryPrice) * position.quantity;
                    const pnlPercent = (pnl / (position.entryPrice * position.quantity)) * 100;
                    
                    totalValue += value;
                    totalPnL += pnl;
                    
                    const positionEl = document.createElement('div');
                    positionEl.className = 'bg-gray-50 dark:bg-gray-700 rounded-lg p-3';
                    positionEl.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="font-semibold">${position.symbol}</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">${position.quantity} @ $${position.entryPrice.toLocaleString()}</div>
                                <div class="text-xs text-blue-600">${position.strategy || 'A01+A02'}</div>
                            </div>
                            <div class="text-right">
                                <div class="font-semibold">$${value.toLocaleString()}</div>
                                <div class="text-sm ${pnl >= 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${pnl >= 0 ? '+' : ''}$${pnl.toFixed(2)} (${pnl >= 0 ? '+' : ''}${pnlPercent.toFixed(1)}%)
                                </div>
                            </div>
                        </div>
                    `;
                    
                    positionsEl.appendChild(positionEl);
                });
                
                valueEl.textContent = `$${totalValue.toLocaleString()}`;
                const totalPnLPercent = totalValue > 0 ? (totalPnL / (totalValue - totalPnL)) * 100 : 0;
                pnlEl.textContent = `${totalPnL >= 0 ? '+' : ''}$${totalPnL.toFixed(2)} (${totalPnL >= 0 ? '+' : ''}${totalPnLPercent.toFixed(1)}%)`;
                pnlEl.className = `text-lg font-semibold ${totalPnL >= 0 ? 'text-green-600' : 'text-red-600'}`;
            }

            // Price Alerts
            addPriceAlert() {
                const symbol = document.getElementById('alertSymbol').value;
                const price = parseFloat(document.getElementById('alertPrice').value);
                
                if (!symbol || !price) {
                    this.showToast('danger', 'Hata!', 'Sembol ve fiyat gerekli');
                    return;
                }
                
                this.alerts.push({
                    id: Date.now(),
                    symbol: symbol.toUpperCase(),
                    targetPrice: price,
                    createdAt: new Date().toISOString(),
                    strategy: 'Smart Alert'
                });
                
                this.updateAlertsDisplay();
                this.saveData();
                document.getElementById('alertPrice').value = '';
                
                this.showToast('success', 'Smart Alarm!', `${symbol.toUpperCase()} - $${price.toLocaleString()}`);
            }

            updateAlertsDisplay() {
                const alertsEl = document.getElementById('activeAlerts');
                const noAlertsEl = document.getElementById('noAlertsMessage');
                
                alertsEl.innerHTML = '';
                
                if (this.alerts.length === 0) {
                    noAlertsEl.style.display = 'block';
                    return;
                }
                
                noAlertsEl.style.display = 'none';
                
                this.alerts.forEach(alert => {
                    const alertEl = document.createElement('div');
                    alertEl.className = 'alert-card rounded-lg p-3 flex justify-between items-center';
                    alertEl.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center">
                                <span class="text-orange-600 text-sm">🔔</span>
                            </div>
                            <div>
                                <div class="font-semibold text-orange-900 dark:text-orange-100">${alert.symbol}</div>
                                <div class="text-sm text-orange-700 dark:text-orange-300">$${alert.targetPrice.toLocaleString()}</div>
                                <div class="text-xs text-orange-600">${alert.strategy}</div>
                            </div>
                        </div>
                        <button onclick="multiPairApp.removeAlert(${alert.id})" class="p-1 text-orange-600 hover:text-orange-700 bg-orange-100 dark:bg-orange-800 rounded transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    `;
                    alertsEl.appendChild(alertEl);
                });
            }

            removeAlert(alertId) {
                this.alerts = this.alerts.filter(alert => alert.id !== alertId);
                this.updateAlertsDisplay();
                this.saveData();
            }

            // Enhanced UI Management
            toggleMobileMenu() {
                const menu = document.getElementById('mobileMenu');
                menu.classList.toggle('hidden');
            }

            switchMobileTab(tab) {
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('text-primary', 'bg-primary/10');
                });
                document.querySelector(`[data-tab="${tab}"]`).classList.add('text-primary', 'bg-primary/10');
                
                // Show appropriate content
                switch(tab) {
                    case 'charts':
                        document.querySelector('#customChartContainer').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case 'signals':
                        document.querySelector('#combinedSignalHistory').scrollIntoView({ behavior: 'smooth' });
                        break;
                    case 'portfolio':
                        this.openPortfolioModal();
                        break;
                    default:
                        document.querySelector('#activePairs').scrollIntoView({ behavior: 'smooth' });
                }
            }

            filterPairs() {
                const pairs = document.querySelectorAll('.pair-card');
                pairs.forEach(pair => {
                    const pairKey = pair.id.replace('pair_', '');
                    const pairTracker = this.pairs.get(pairKey);
                    
                    let show = true;
                    switch(this.currentFilter) {
                        case 'profitable':
                            show = pair.querySelector('.performance-positive') !== null;
                            break;
                        case 'signals':
                            show = pair.querySelector('[id*="signal_"]').innerHTML.includes('BUY') || 
                                   pair.querySelector('[id*="signal_"]').innerHTML.includes('SELL');
                            break;
                        case 'alerts':
                            show = this.alerts.some(alert => alert.symbol.toLowerCase().includes(pairKey.split('_')[0]));
                            break;
                        case 'confluence':
                            show = pair.querySelector('[id*="confluence_count_"]').textContent !== '0 confluence';
                            break;
                        default:
                            show = true;
                    }
                    
                    pair.style.display = show ? 'block' : 'none';
                });
            }

            updateFilterButtons() {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active', 'bg-primary', 'text-white');
                    btn.classList.add('bg-gray-200', 'dark:bg-gray-700');
                    
                    if (btn.dataset.filter === this.currentFilter) {
                        btn.classList.remove('bg-gray-200', 'dark:bg-gray-700');
                        btn.classList.add('active', 'bg-primary', 'text-white');
                    }
                });
            }

            // Data Management
            saveData() {
                const data = {
                    pairs: Array.from(this.pairs.entries()).map(([key, tracker]) => ({
                        key,
                        symbol: tracker.symbol,
                        interval: tracker.interval,
                        emaShort: tracker.emaShort,
                        emaLong: tracker.emaLong
                    })),
                    signals: this.allSignals.slice(0, 50), // Save only recent signals
                    alerts: this.alerts,
                    portfolio: this.portfolio,
                    signalStats: this.signalStats,
                    notificationsEnabled: this.notificationsEnabled,
                    soundEnabled: this.soundEnabled
                };
                
                try {
                    localStorage.setItem('cryptoAdvancedSignalsData', JSON.stringify(data));
                } catch (error) {
                    console.error('Failed to save advanced data:', error);
                }
            }

            loadStoredData() {
                try {
                    const stored = localStorage.getItem('cryptoAdvancedSignalsData');
                    if (stored) {
                        const data = JSON.parse(stored);
                        
                        this.allSignals = data.signals || [];
                        this.alerts = data.alerts || [];
                        this.portfolio = data.portfolio || [];
                        this.signalStats = { ...this.signalStats, ...(data.signalStats || {}) };
                        this.notificationsEnabled = data.notificationsEnabled || false;
                        this.soundEnabled = data.soundEnabled !== false;
                        
                        // Restore pairs
                        if (data.pairs) {
                            data.pairs.forEach(pairData => {
                                this.addPairToSystem(pairData.symbol, pairData.interval, pairData.emaShort, pairData.emaLong);
                            });
                        }
                        
                        this.updateAlertsDisplay();
                        this.updateNotificationButton();
                        this.updateSoundButton();
                    }
                } catch (error) {
                    console.error('Failed to load stored advanced data:', error);
                }
            }

            exportData() {
                const data = {
                    exportedAt: new Date().toISOString(),
                    strategy: 'A01+A02 Advanced',
                    pairs: Array.from(this.pairs.keys()),
                    signalStats: this.signalStats,
                    recentSignals: this.allSignals.slice(0, 10),
                    alerts: this.alerts,
                    portfolio: this.portfolio,
                    confluenceCount: this.signalStats.confluence
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `advanced-crypto-signals-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                
                this.showToast('success', 'Advanced Export!', 'A01+A02 verileri başarıyla indirildi');
            }

            // PWA Features
            initPWA() {
                // Check if PWA can be installed
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    this.deferredPrompt = e;
                    this.showInstallBanner();
                });
            }

            showInstallBanner() {
                document.getElementById('installBanner').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('installBanner').classList.add('animate-slide-down');
                }, 100);
            }

            dismissInstallBanner() {
                document.getElementById('installBanner').classList.add('hidden');
                localStorage.setItem('advancedInstallBannerDismissed', 'true');
            }

            async installPWA() {
                if (this.deferredPrompt) {
                    this.deferredPrompt.prompt();
                    const { outcome } = await this.deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        this.showToast('success', 'Advanced App Yüklendi!', 'Ana ekranınızdan A01+A02 erişimi');
                    }
                    this.deferredPrompt = null;
                    this.dismissInstallBanner();
                }
            }

            // Pull to Refresh
            initPullToRefresh() {
                let startY = 0;
                let currentY = 0;
                let isPulling = false;
                
                document.addEventListener('touchstart', (e) => {
                    if (window.scrollY === 0) {
                        startY = e.touches[0].clientY;
                        isPulling = true;
                    }
                });
                
                document.addEventListener('touchmove', (e) => {
                    if (isPulling && window.scrollY === 0) {
                        currentY = e.touches[0].clientY;
                        const pullDistance = currentY - startY;
                        
                        if (pullDistance > 50) {
                            document.getElementById('pullToRefresh').classList.remove('hidden');
                        }
                    }
                });
                
                document.addEventListener('touchend', () => {
                    if (isPulling && currentY - startY > 100) {
                        this.refreshAllAdvancedData();
                    }
                    
                    document.getElementById('pullToRefresh').classList.add('hidden');
                    isPulling = false;
                    startY = 0;
                    currentY = 0;
                });
            }

            refreshAllAdvancedData() {
                this.showToast('success', 'A01+A02 Yenileniyor...', 'Tüm advanced veriler güncelleniyor');
                
                // Refresh market data
                this.updateMarketOverview();
                
                // Refresh chart
                if (window.realTimePriceChart) {
                    window.realTimePriceChart.reconnect();
                }
                
                // Refresh pairs
                this.pairs.forEach(tracker => tracker.reconnect && tracker.reconnect());
            }

            // Enhanced Toast System
            showToast(type, title, message) {
                const toast = document.getElementById('notificationToast');
                const icon = document.getElementById('toastIcon');
                const titleEl = document.getElementById('toastTitle');
                const messageEl = document.getElementById('toastMessage');
                const timeEl = document.getElementById('toastTime');

                const iconConfig = {
                    success: { icon: '✓', class: 'notification-success' },
                    danger: { icon: '!', class: 'notification-danger' },
                    warning: { icon: '⚠', class: 'notification-warning' }
                };

                const config = iconConfig[type] || iconConfig.success;
                icon.className = `flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center mr-3 ${config.class}`;
                icon.querySelector('span').textContent = config.icon;
                titleEl.textContent = title;
                messageEl.textContent = message;
                timeEl.textContent = new Date().toLocaleTimeString('tr-TR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });

                toast.classList.remove('translate-x-full');
                
                this.toastTimeout = setTimeout(() => {
                    this.hideToast();
                }, 5000);
            }

            hideToast() {
                const toast = document.getElementById('notificationToast');
                toast.classList.add('translate-x-full');
                if (this.toastTimeout) {
                    clearTimeout(this.toastTimeout);
                }
            }

            // Enhanced features implementation
            sortPairs() {
                const activePairsEl = document.getElementById('activePairs');
                const pairs = Array.from(activePairsEl.children);
                
                pairs.sort((a, b) => {
                    // Sort by confluence count first, then by symbol name
                    const aConfluence = parseInt(a.querySelector('[id*="confluence_count_"]').textContent.split(' ')[0]);
                    const bConfluence = parseInt(b.querySelector('[id*="confluence_count_"]').textContent.split(' ')[0]);
                    
                    if (aConfluence !== bConfluence) {
                        return bConfluence - aConfluence; // Higher confluence first
                    }
                    
                    const aSymbol = a.querySelector('h3').textContent;
                    const bSymbol = b.querySelector('h3').textContent;
                    return aSymbol.localeCompare(bSymbol);
                });
                
                pairs.forEach(pair => activePairsEl.appendChild(pair));
                this.showToast('success', 'Advanced Sıralama!', 'Çiftler confluence ve alfabetik olarak sıralandı');
            }

            filterSignals(filter) {
                const signalItems = document.querySelectorAll('#combinedSignalHistory > div');
                
                signalItems.forEach(item => {
                    let show = true;
                    
                    switch(filter) {
                        case 'buy':
                            show = item.innerHTML.includes('BUY');
                            break;
                        case 'sell':
                            show = item.innerHTML.includes('SELL');
                            break;
                        case 'confluence':
                            show = item.innerHTML.includes('confluence') || item.innerHTML.includes('Confluence');
                            break;
                        case 'today':
                            const today = new Date().toLocaleDateString('tr-TR');
                            show = item.innerHTML.includes(today);
                            break;
                        default:
                            show = true;
                    }
                    
                    item.style.display = show ? 'block' : 'none';
                });
            }

            clearSignalHistory() {
                if (confirm('Advanced sinyal geçmişini temizlemek istediğinizden emin misiniz?')) {
                    this.allSignals = [];
                    this.signalStats = { buy: 0, sell: 0, successful: 0, failed: 0, pending: 0, confluence: 0, totalPnL: 0 };
                    this.updateCombinedSignalsUI();
                    this.saveData();
                    this.showToast('success', 'Temizlendi!', 'A01+A02 sinyal geçmişi silindi');
                }
            }

            refreshStatistics() {
                this.updateSignalAccuracy();
                this.updateMarketOverview();
                this.showToast('success', 'Advanced Güncellendi!', 'A01+A02 istatistikleri yenilendi');
            }

            removePair(pairKey) {
                const pairTracker = this.pairs.get(pairKey);
                if (pairTracker) {
                    pairTracker.disconnect();
                    this.pairs.delete(pairKey);
                    
                    const cardEl = document.getElementById(`pair_${pairKey}`);
                    if (cardEl) {
                        cardEl.style.animation = 'slideUp 0.3s ease-out reverse';
                        setTimeout(() => cardEl.remove(), 300);
                    }
                    
                    this.updateUI();
                    this.saveData();
                    this.showToast('success', 'Silindi!', `Advanced çift kaldırıldı`);
                }
            }

            clearAllPairs() {
                if (this.pairs.size === 0) return;

                if (confirm('Tüm A01+A02 çiftlerini kaldırmak istediğinizden emin misiniz?')) {
                    this.pairs.forEach(pairTracker => pairTracker.disconnect());
                    this.pairs.clear();
                    
                    document.getElementById('activePairs').innerHTML = '';
                    this.updateUI();
                    this.saveData();
                    this.showToast('success', 'Temizlendi!', 'Tüm advanced çiftler kaldırıldı');
                }
            }

            toggleSound() {
                this.soundEnabled = this.audioSystem.toggleSound();
                this.updateSoundButton();
                this.saveData();
                this.showToast('success', 'Advanced Ses', this.soundEnabled ? 'A01+A02 ses açıldı' : 'Ses kapatıldı');
            }

            updateSoundButton() {
                const updateButton = (button, icon) => {
                    if (!button || !icon) return;
                    
                    if (this.soundEnabled) {
                        icon.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M5 7h4l5-5v16l-5-5H5a2 2 0 01-2-2V9a2 2 0 012-2z"></path>
                        `;
                        button.title = 'Advanced Ses Açık';
                        button.classList.remove('bg-red-100', 'dark:bg-red-900');
                        button.classList.add('bg-gray-100', 'dark:bg-gray-700');
                    } else {
                        icon.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a2 2 0 01-2-2V9a2 2 0 012-2h1.586l4.707-4.707C10.923 1.663 12 2.109 12 3v18c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
                        `;
                        button.title = 'Ses Kapalı';
                        button.classList.remove('bg-gray-100', 'dark:bg-gray-700');
                        button.classList.add('bg-red-100', 'dark:bg-red-900');
                    }
                };
                
                updateButton(document.getElementById('soundToggle'), document.getElementById('soundIcon'));
                updateButton(document.getElementById('mobileSoundToggle'), document.querySelector('#mobileSoundToggle svg'));
            }

            playSignalSound(type, strategy) {
                if (this.soundEnabled) {
                    this.audioSystem.playSignalSound(type.toLowerCase(), strategy);
                    
                    // Visual feedback with strategy context
                    [document.getElementById('soundToggle'), document.getElementById('mobileSoundToggle')].forEach(button => {
                        if (button) {
                            button.classList.add('sound-wave');
                            setTimeout(() => button.classList.remove('sound-wave'), 800);
                        }
                    });
                }
            }

            async enableNotifications() {
                if ('Notification' in window) {
                    if (this.notificationsEnabled) {
                        this.notificationsEnabled = false;
                        this.updateNotificationButton();
                        this.showToast('success', 'Advanced Bildirimler', 'A01+A02 bildirimleri kapatıldı');
                    } else {
                        let permission = Notification.permission;
                        
                        if (permission === 'denied') {
                            this.showPermissionHelp();
                            return;
                        }
                        
                        if (permission === 'default') {
                            permission = await Notification.requestPermission();
                        }
                        
                        if (permission === 'granted') {
                            this.notificationsEnabled = true;
                            this.updateNotificationButton();
                            this.saveData();
                            this.showToast('success', 'Advanced Başarılı!', 'A01+A02 browser bildirimleri etkinleştirildi');
                            
                            // Test notification
                            setTimeout(() => {
                                new Notification('Advanced Test Bildirimi', {
                                    body: 'A01+A02 stratejileri başarıyla etkinleştirildi! 🚀',
                                    icon: '/favicon.ico'
                                });
                            }, 1000);
                        } else {
                            this.showToast('danger', 'Hata!', 'Bildirim izni alınamadı');
                        }
                    }
                } else {
                    this.showToast('danger', 'Hata!', 'Bu tarayıcı bildirimleri desteklemiyor');
                }
            }

            updateNotificationButton() {
                const updateButton = (btn) => {
                    if (!btn) return;
                    
                    if (this.notificationsEnabled) {
                        btn.innerHTML = btn.id.includes('mobile') ? '✅ A01+A02' : '✅ Advanced Bildirimler Aktif';
                        btn.className = btn.className.replace('bg-gray-600', 'bg-green-600').replace('hover:bg-gray-700', 'hover:bg-green-700');
                        btn.title = 'A01+A02 Bildirimleri Kapat';
                    } else {
                        btn.innerHTML = btn.id.includes('mobile') ? '🔔 Bildirim' : '🔔 Advanced Bildirimler';
                        btn.className = btn.className.replace('bg-green-600', 'bg-gray-600').replace('hover:bg-green-700', 'hover:bg-gray-700');
                        btn.title = 'A01+A02 Bildirimleri Aç';
                    }
                };
                
                updateButton(document.getElementById('notificationBtn'));
                updateButton(document.getElementById('mobileNotificationBtn'));
            }

            showPermissionHelp() {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md w-full border border-gray-200 dark:border-gray-700 max-h-[90vh] overflow-y-auto">
                        <div class="text-center mb-6">
                            <div class="w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">A01+A02 Bildirim İzni Reddedildi</h3>
                            <p class="text-gray-600 dark:text-gray-400 text-sm mb-6">
                                Advanced stratejiler için tarayıcınız bildirimleri engellemiş. Manuel olarak açmanız gerekiyor.
                            </p>
                        </div>
                        
                        <div class="space-y-4 mb-6">
                            <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                <h4 class="font-semibold text-blue-900 dark:text-blue-300 mb-2">🌐 Chrome/Edge için:</h4>
                                <ol class="text-sm text-blue-800 dark:text-blue-300 space-y-1">
                                    <li>1. Adres çubuğundaki 🔒 kilit simgesine dokunun</li>
                                    <li>2. "Bildirimler" → "İzin Ver" seçin</li>
                                    <li>3. Sayfayı yenileyin</li>
                                </ol>
                            </div>
                            
                            <div class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
                                <h4 class="font-semibold text-orange-900 dark:text-orange-300 mb-2">🦊 Firefox için:</h4>
                                <ol class="text-sm text-orange-800 dark:text-orange-300 space-y-1">
                                    <li>1. Adres çubuğundaki 🛡️ simgeye dokunun</li>
                                    <li>2. "Bildirimler" ayarını değiştirin</li>
                                    <li>3. Sayfayı yenileyin</li>
                                </ol>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button onclick="window.location.reload()" class="flex-1 mobile-button px-4 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition-colors">
                                🔄 A01+A02 Yenile
                            </button>
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 mobile-button px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors">
                                ❌ Kapat
                            </button>
                        </div>
                        
                        <p class="text-xs text-gray-500 dark:text-gray-400 text-center mt-4">
                            💡 İpucu: A01+A02 ses bildirimleri her zaman aktif kalır
                        </p>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.remove();
                    }
                }, 20000);
            }

            showNotification(signal) {
                if (!this.notificationsEnabled) return;

                let notificationTitle = `${signal.type} Advanced Sinyal - ${signal.symbol}`;
                if (signal.confluence >= 3) {
                    notificationTitle = `🚀 HIGH CONFLUENCE ${signal.type} - ${signal.symbol}`;
                }

                const notification = new Notification(notificationTitle, {
                    body: `Fiyat: $${signal.price.toLocaleString()}\nConfluence: ${signal.confluence} indikatör\nZaman: ${signal.timestamp}`,
                    icon: '/favicon.ico',
                    tag: signal.symbol,
                    vibrate: signal.confluence >= 3 ? [200, 100, 200, 100, 200] : [200, 100, 200]
                });

                setTimeout(() => notification.close(), 8000);
            }

            updateCombinedSignalsUI() {
                // Update statistics with confluence
                document.getElementById('successfulSignals').textContent = this.signalStats.successful;
                document.getElementById('failedSignals').textContent = this.signalStats.failed;
                document.getElementById('confluenceSignals').textContent = this.signalStats.confluence;
                
                const total = this.signalStats.successful + this.signalStats.failed;
                const winRate = total > 0 ? (this.signalStats.successful / total * 100) : 0;
                document.getElementById('winRate').textContent = `${winRate.toFixed(1)}%`;
                document.getElementById('totalPnL').textContent = `${this.signalStats.totalPnL >= 0 ? '+' : ''}$${this.signalStats.totalPnL.toFixed(2)}`;
                
                if (this.allSignals.length > 0) {
                    // Update latest signal with advanced details
                    const latestSignal = this.allSignals[0];
                    const latestSignalEl = document.getElementById('latestSignalCombined');
                    const signalColor = latestSignal.type === 'BUY' ? 'text-green-600' : 'text-red-600';
                    const signalBg = latestSignal.type === 'BUY' ? 'bg-green-100 dark:bg-green-900' : 'bg-red-100 dark:bg-red-900';
                    
                    let statusIcon = '';
                    if (latestSignal.status === 'successful') statusIcon = '✅';
                    else if (latestSignal.status === 'failed') statusIcon = '❌';
                    else statusIcon = '⏳';
                    
                    // Create confluence badge
                    let confluenceBadge = '';
                    if (latestSignal.confluence >= 4) {
                        confluenceBadge = '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 font-bold">🚀 VERY HIGH CONFLUENCE</span>';
                    } else if (latestSignal.confluence >= 3) {
                        confluenceBadge = '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 font-bold">⚡ HIGH CONFLUENCE</span>';
                    } else if (latestSignal.confluence >= 2) {
                        confluenceBadge = '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300">🔥 CONFLUENCE</span>';
                    }
                    
                    // Create strategy badges
                    const strategyBadges = this.createStrategyBadges(latestSignal.indicators);
                    
                    let cardClass = signalBg;
                    if (latestSignal.confluence >= 4) {
                        cardClass += ' confluence-high';
                    } else if (latestSignal.confluence >= 3) {
                        cardClass += ' confluence-medium';
                    } else if (latestSignal.confluence >= 2) {
                        cardClass += ' confluence-low';
                    }
                    
                    latestSignalEl.innerHTML = `
                        <div class="${cardClass} rounded-lg p-4 signal-animation">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center space-x-2">
                                    <div class="text-2xl font-bold ${signalColor}">${latestSignal.type}</div>
                                    <span class="text-lg">${statusIcon}</span>
                                    <div class="text-yellow-500">${'★'.repeat(Math.ceil((latestSignal.strength || 5) / 2))}</div>
                                </div>
                                <div class="text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 rounded-full">
                                    ${latestSignal.interval} • ${latestSignal.confluence || 1} confluence
                                </div>
                            </div>
                            ${confluenceBadge ? `<div class="mb-3">${confluenceBadge}</div>` : ''}
                            <div class="grid grid-cols-2 gap-3 mb-3">
                                <div>
                                    <div class="text-xs text-gray-500">Sembol</div>
                                    <div class="font-semibold">${latestSignal.symbol}</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Fiyat</div>
                                    <div class="font-mono font-bold">$${latestSignal.price.toLocaleString()}</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Sinyal Gücü</div>
                                    <div class="text-sm font-bold">${latestSignal.strength || 5}/10</div>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500">Confluence</div>
                                    <div class="text-sm font-bold">${latestSignal.confluence || 1} indikatör</div>
                                </div>
                            </div>
                            <div class="border-t border-gray-200 dark:border-gray-600 pt-2">
                                <div class="text-xs text-gray-500 mb-1">Aktif A01+A02 Stratejiler:</div>
                                <div class="flex flex-wrap gap-1">
                                    ${strategyBadges}
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 mt-2">${latestSignal.timestamp}</div>
                            ${latestSignal.pnl ? `<div class="text-sm font-semibold mt-2 ${latestSignal.pnl >= 0 ? 'text-green-600' : 'text-red-600'}">
                                PnL: ${latestSignal.pnl >= 0 ? '+' : ''}$${latestSignal.pnl.toFixed(2)}
                            </div>` : ''}
                        </div>
                    `;

                    // Update combined history with advanced details
                    const historyEl = document.getElementById('combinedSignalHistory');
                    const noSignalsEl = document.getElementById('noSignalsMessage');
                    
                    historyEl.innerHTML = '';
                    noSignalsEl.style.display = 'none';
                    
                    this.allSignals.slice(0, 30).forEach(signal => {
                        const signalItem = document.createElement('div');
                        const itemBg = signal.type === 'BUY' ? 'bg-green-100 dark:bg-green-900' : 'bg-red-100 dark:bg-red-900';
                        const itemColor = signal.type === 'BUY' ? 'text-green-600' : 'text-red-600';
                        
                        let statusIcon = '';
                        if (signal.status === 'successful') statusIcon = '✅';
                        else if (signal.status === 'failed') statusIcon = '❌';
                        else statusIcon = '⏳';
                        
                        const confidenceStars = '★'.repeat(Math.ceil((signal.strength || 5) / 2));
                        
                        let confluenceIcon = '';
                        if (signal.confluence >= 4) confluenceIcon = '🚀';
                        else if (signal.confluence >= 3) confluenceIcon = '⚡';
                        else if (signal.confluence >= 2) confluenceIcon = '🔥';
                        
                        signalItem.className = `flex justify-between items-center p-3 rounded ${itemBg} mb-2 mobile-card`;
                        signalItem.innerHTML = `
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-semibold ${itemColor}">${signal.type}</span>
                                    <span class="text-sm text-gray-600 dark:text-gray-400">${signal.symbol}</span>
                                    <span>${statusIcon}</span>
                                    <span class="text-yellow-500 text-xs">${confidenceStars}</span>
                                    ${confluenceIcon ? `<span class="text-sm">${confluenceIcon}</span>` : ''}
                                </div>
                                <div class="text-xs text-gray-500">${signal.timestamp}</div>
                                ${signal.confluence ? `<div class="text-xs text-blue-600">Confluence: ${signal.confluence}</div>` : ''}
                                ${signal.pnl ? `<div class="text-xs font-semibold ${signal.pnl >= 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${signal.pnl >= 0 ? '+' : ''}$${signal.pnl.toFixed(2)}
                                </div>` : ''}
                            </div>
                            <span class="font-mono text-sm">$${signal.price.toLocaleString()}</span>
                        `;
                        
                        historyEl.appendChild(signalItem);
                    });
                } else {
                    document.getElementById('noSignalsMessage').style.display = 'block';
                }
            }

            // Create strategy badges for signal display
            createStrategyBadges(indicators) {
                if (!indicators) {
                    return '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300">EMA Cross</span>';
                }
                
                let badges = '';
                
                if (indicators.ema && indicators.ema.signal) {
                    badges += '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300">EMA</span>';
                }
                
                if (indicators.rsi && indicators.rsi.signal) {
                    badges += '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300">RSI-HM(A01)</span>';
                }
                
                if (indicators.ao && indicators.ao.signal) {
                    badges += '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300">AO(A02)</span>';
                }
                
                if (indicators.eom && indicators.eom.signal) {
                    badges += '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300">EOM</span>';
                }
                
                if (indicators.smi && indicators.smi.signal) {
                    badges += '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300">SMI</span>';
                }
                
                return badges || '<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300">Basic</span>';
            }

            updateUI() {
                const pairCount = this.pairs.size;
                document.getElementById('activePairsCount').textContent = `${pairCount} çift`;
                
                const noPairsMsg = document.getElementById('noPairsMessage');
                noPairsMsg.style.display = pairCount === 0 ? 'block' : 'none';
                
                // Update profitability indicator
                const profitabilityEl = document.getElementById('profitability');
                const totalPnL = this.signalStats.totalPnL;
                const pnlPercent = totalPnL !== 0 ? (totalPnL / 1000 * 100) : 0; // Assuming $1000 base
                
                profitabilityEl.textContent = `${totalPnL >= 0 ? '+' : ''}${pnlPercent.toFixed(1)}%`;
                profitabilityEl.className = `text-xs ${totalPnL >= 0 ? 'bg-green-100 dark:bg-green-900 text-green-600' : 'bg-red-100 dark:bg-red-900 text-red-600'} px-2 py-0.5 rounded-full`;
            }
        }

        // Advanced Individual Pair Tracker with A01 & A02 Strategies
        class AdvancedPairTracker {
            constructor(symbol, interval, emaShort, emaLong, parentApp) {
                this.symbol = symbol;
                this.interval = interval;
                this.emaShort = emaShort;
                this.emaLong = emaLong;
                this.parentApp = parentApp;
                
                this.ws = null;
                this.priceData = [];
                this.highData = [];
                this.lowData = [];
                this.volumeData = [];
                this.emaShortData = [];
                this.emaLongData = [];
                
                // Advanced indicators data
                this.rsiData = [];
                this.rsiSmaData = [];
                this.aoData = [];
                this.eomData = [];
                this.smiKData = [];
                this.smiDData = [];
                
                this.pairKey = `${symbol}_${interval}_${emaShort}_${emaLong}`;
                this.signalCount = 0;
                this.confluenceCount = 0;
                this.lastSignalType = null;
                this.performance = 0;
                this.volume24h = 0;
                
                // Strategy flags
                this.trendStrength = 'neutral';
                this.rsiTrendContinuation = false;
                this.divergenceDetected = false;
                this.eomAboveZero = false;
                
                this.connect();
                this.fetchInitialData();
            }

            async fetchInitialData() {
                try {
                    // Fetch 24h ticker data
                    const response = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${this.symbol.toUpperCase()}`);
                    const data = await response.json();
                    
                    this.volume24h = parseFloat(data.volume);
                    const priceChange = parseFloat(data.priceChangePercent);
                    
                    // Update UI
                    const volumeEl = document.getElementById(`volume_${this.pairKey}`);
                    const changeEl = document.getElementById(`change_${this.pairKey}`);
                    const performanceEl = document.getElementById(`performance_${this.pairKey}`);
                    
                    if (volumeEl) volumeEl.textContent = `Vol: ${(this.volume24h / 1000000).toFixed(1)}M`;
                    if (changeEl) {
                        changeEl.textContent = `${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(2)}%`;
                        changeEl.className = `font-mono ${priceChange >= 0 ? 'text-green-600' : 'text-red-600'}`;
                    }
                    if (performanceEl) {
                        performanceEl.className = `absolute top-2 right-2 w-3 h-3 rounded-full ${
                            priceChange > 2 ? 'performance-positive' : 
                            priceChange < -2 ? 'performance-negative' : 
                            'performance-neutral'
                        }`;
                    }
                    
                } catch (error) {
                    console.error('Failed to fetch initial data:', error);
                }
            }

            connect() {
                this.updateStatus('connecting', 'Bağlanıyor...');
                
                if (this.ws) {
                    this.ws.close();
                }

                const stream = `${this.symbol}@kline_${this.interval}`;
                this.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${stream}`);

                this.ws.onopen = () => {
                    this.updateStatus('connected', 'Canlı');
                };

                this.ws.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    this.handleKlineData(data);
                };

                this.ws.onerror = () => {
                    this.updateStatus('error', 'Hata');
                };

                this.ws.onclose = () => {
                    this.updateStatus('disconnected', 'Kesildi');
                    setTimeout(() => this.connect(), 5000);
                };
            }

            reconnect() {
                this.priceData = [];
                this.highData = [];
                this.lowData = [];
                this.volumeData = [];
                this.emaShortData = [];
                this.emaLongData = [];
                this.rsiData = [];
                this.aoData = [];
                this.eomData = [];
                this.smiKData = [];
                this.connect();
            }

            disconnect() {
                if (this.ws) {
                    this.ws.close();
                    this.ws = null;
                }
            }

            handleKlineData(data) {
                if (!data.k) return;

                const kline = data.k;
                const price = parseFloat(kline.c);
                const high = parseFloat(kline.h);
                const low = parseFloat(kline.l);
                const volume = parseFloat(kline.v);

                // Update price display with animation
                const priceEl = document.getElementById(`price_${this.pairKey}`);
                if (priceEl) {
                    const oldPrice = parseFloat(priceEl.textContent.replace('$', '').replace(',', ''));
                    priceEl.textContent = `$${price.toLocaleString()}`;
                    
                    // Add price change animation
                    if (oldPrice && oldPrice !== price) {
                        priceEl.classList.remove('text-green-600', 'text-red-600');
                        priceEl.classList.add(price > oldPrice ? 'text-green-600' : 'text-red-600');
                        
                        setTimeout(() => {
                            priceEl.classList.remove('text-green-600', 'text-red-600');
                        }, 1000);
                    }
                }

                // Add to data arrays
                this.priceData.push(price);
                this.highData.push(high);
                this.lowData.push(low);
                this.volumeData.push(volume);
                
                // Keep only necessary data
                const maxLength = 100;
                if (this.priceData.length > maxLength) {
                    this.priceData.shift();
                    this.highData.shift();
                    this.lowData.shift();
                    this.volumeData.shift();
                }

                // Calculate all indicators and check for advanced signals
                this.calculateAllIndicators();
                this.checkAdvancedSignals();
            }

            calculateAllIndicators() {
                if (this.priceData.length < Math.max(this.emaLong, 34)) return;

                // Calculate EMAs
                this.calculateEMAs();
                
                // Calculate A01 - RSI Heat Map
                this.calculateRSIHeatMap();
                
                // Calculate A02 - Awesome Oscillator
                this.calculateAwesomeOscillator();
                
                // Calculate EOM
                this.calculateEaseOfMovement();
                
                // Calculate SMI
                this.calculateSMI();
                
                // Update UI indicators
                this.updateIndicatorDisplays();
            }

            calculateEMAs() {
                const emaShort = this.calculateEMA(this.priceData, this.emaShort);
                const emaLong = this.calculateEMA(this.priceData, this.emaLong);
                
                this.emaShortData.push(emaShort);
                this.emaLongData.push(emaLong);

                // Keep only necessary data
                if (this.emaShortData.length > 100) {
                    this.emaShortData.shift();
                    this.emaLongData.shift();
                }

                // Update UI
                const emaShortEl = document.getElementById(`ema_short_${this.pairKey}`);
                const emaLongEl = document.getElementById(`ema_long_${this.pairKey}`);
                
                if (emaShortEl) emaShortEl.textContent = `$${emaShort.toLocaleString()}`;
                if (emaLongEl) emaLongEl.textContent = `$${emaLong.toLocaleString()}`;
            }

            calculateRSIHeatMap() {
                // A01 Strategy: RSI 21-34 SMA with trend continuation
                const rsi21 = this.calculateRSI(this.priceData, 21);
                const rsi34 = this.calculateRSI(this.priceData, 34);
                
                if (rsi21 && rsi34) {
                    this.rsiData.push(rsi21);
                    this.rsiSmaData.push(rsi34);
                    
                    // Keep data manageable
                    if (this.rsiData.length > 50) {
                        this.rsiData.shift();
                        this.rsiSmaData.shift();
                    }
                    
                    // Update trend continuation flag
                    this.rsiTrendContinuation = rsi21 > 50;
                    
                    // Update UI
                    const rsiEl = document.getElementById(`rsi_${this.pairKey}`);
                    if (rsiEl) {
                        rsiEl.textContent = rsi21.toFixed(1);
                        rsiEl.className = `font-mono ${rsi21 > 50 ? 'text-green-600' : 'text-red-600'}`;
                    }
                }
            }

            calculateAwesomeOscillator() {
                // A02 Strategy: AO with divergence detection
                if (this.highData.length < 34 || this.lowData.length < 34) return;
                
                const medianPrices = this.highData.map((high, i) => (high + this.lowData[i]) / 2);
                const fastSMA = this.calculateSMA(medianPrices.slice(-5));
                const slowSMA = this.calculateSMA(medianPrices.slice(-34));
                
                if (fastSMA && slowSMA) {
                    const ao = fastSMA - slowSMA;
                    this.aoData.push(ao);
                    
                    if (this.aoData.length > 100) this.aoData.shift();
                    
                    // Detect divergence
                    this.divergenceDetected = this.detectDivergence();
                    
                    // Update UI
                    const aoEl = document.getElementById(`ao_${this.pairKey}`);
                    if (aoEl) {
                        aoEl.textContent = ao.toFixed(4);
                        aoEl.className = `font-mono ${ao > 0 ? 'text-green-600' : 'text-red-600'}`;
                    }
                }
            }

            calculateEaseOfMovement() {
                if (this.highData.length < 2 || this.volumeData.length < 2) return;
                
                const currentHigh = this.highData[this.highData.length - 1];
                const currentLow = this.lowData[this.lowData.length - 1];
                const prevHigh = this.highData[this.highData.length - 2];
                const prevLow = this.lowData[this.lowData.length - 2];
                const volume = this.volumeData[this.volumeData.length - 1];
                
                const distanceMoved = (currentHigh + currentLow) / 2 - (prevHigh + prevLow) / 2;
                const boxHeight = volume / 1000 / (currentHigh - currentLow);
                
                const eom = boxHeight !== 0 ? distanceMoved / boxHeight : 0;
                this.eomData.push(eom);
                
                if (this.eomData.length > 50) this.eomData.shift();
                
                // Check if EOM is above zero (strategy requirement)
                this.eomAboveZero = eom > 0;
            }

            calculateSMI() {
                if (this.highData.length < 10) return;
                
                const kPeriod = 10;
                const recentHighs = this.highData.slice(-kPeriod);
                const recentLows = this.lowData.slice(-kPeriod);
                const recentPrices = this.priceData.slice(-kPeriod);
                
                const highestHigh = Math.max(...recentHighs);
                const lowestLow = Math.min(...recentLows);
                const currentPrice = this.priceData[this.priceData.length - 1];
                
                const midpoint = (highestHigh + lowestLow) / 2;
                const distance = currentPrice - midpoint;
                const range = (highestHigh - lowestLow) / 2;
                
                if (range === 0) return;
                
                const smiK = (distance / range) * 100;
                this.smiKData.push(smiK);
                
                if (this.smiKData.length > 20) this.smiKData.shift();
                
                const smiD = this.smiKData.length >= 3 ? 
                    this.calculateSMA(this.smiKData.slice(-3)) : smiK;
                
                this.smiDData.push(smiD);
                if (this.smiDData.length > 20) this.smiDData.shift();
            }

            checkAdvancedSignals() {
                if (this.priceData.length < 55) return; // Minimum data for all calculations
                
                // Collect all indicator signals
                const indicators = this.gatherIndicatorSignals();
                
                // Analyze confluence and generate signal
                const confluenceAnalysis = this.analyzeConfluence(indicators);
                
                if (confluenceAnalysis.signal) {
                    this.addAdvancedSignal(confluenceAnalysis);
                }
            }

            gatherIndicatorSignals() {
                const indicators = {
                    ema: this.getEMASignal(),
                    rsi: this.getRSIHeatMapSignal(),
                    ao: this.getAOSignal(),
                    eom: this.getEOMSignal(),
                    smi: this.getSMISignal()
                };
                
                return indicators;
            }

            getEMASignal() {
                if (this.emaShortData.length < 2 || this.emaLongData.length < 2) return null;
                
                const currentShort = this.emaShortData[this.emaShortData.length - 1];
                const previousShort = this.emaShortData[this.emaShortData.length - 2];
                const currentLong = this.emaLongData[this.emaLongData.length - 1];
                const previousLong = this.emaLongData[this.emaLongData.length - 2];
                
                let signal = null;
                if (previousShort < previousLong && currentShort > currentLong) {
                    signal = 'BUY';
                } else if (previousShort > previousLong && currentShort < currentLong) {
                    signal = 'SELL';
                }
                
                return {
                    signal,
                    strength: Math.abs(currentShort - currentLong) / currentLong * 100 * 5,
                    trend: currentShort > currentLong ? 'bullish' : 'bearish'
                };
            }

            getRSIHeatMapSignal() {
                if (this.rsiData.length < 2 || this.rsiSmaData.length < 2) return null;
                
                // A01 Strategy logic
                const rsi = this.rsiData[this.rsiData.length - 1];
                const rsiSMA = this.rsiSmaData[this.rsiSmaData.length - 1];
                const avgRSI = (rsi + rsiSMA) / 2;
                
                let signal = null;
                let strength = 0;
                
                // A01 Strategy conditions
                if (rsi < 25 && this.rsiTrendContinuation && avgRSI > 55) {
                    signal = 'BUY';
                    strength = 8; // High strength for A01 strategy
                } else if (rsi > 75 && !this.rsiTrendContinuation) {
                    signal = 'SELL';
                    strength = 7;
                }
                
                return {
                    signal,
                    strength,
                    rsi,
                    rsiSMA,
                    trendContinuation: this.rsiTrendContinuation,
                    strategy: 'A01'
                };
            }

            getAOSignal() {
                if (this.aoData.length < 2) return null;
                
                // A02 Strategy logic
                const ao = this.aoData[this.aoData.length - 1];
                const prevAO = this.aoData[this.aoData.length - 2];
                
                let signal = null;
                let strength = 0;
                
                // Divergence signals (A02 strategy)
                if (this.divergenceDetected.bullish) {
                    signal = 'BUY';
                    strength = 9; // Very high confidence for divergence
                } else if (this.divergenceDetected.bearish) {
                    signal = 'SELL';
                    strength = 9;
                } else if (ao > 0 && prevAO <= 0) {
                    signal = 'BUY';
                    strength = 6;
                } else if (ao < 0 && prevAO >= 0) {
                    signal = 'SELL';
                    strength = 6;
                }
                
                return {
                    signal,
                    strength,
                    ao,
                    divergence: this.divergenceDetected,
                    strategy: 'A02'
                };
            }

            getEOMSignal() {
                if (this.eomData.length < 5) return null;
                
                const eom = this.eomData[this.eomData.length - 1];
                const eomTrend = this.eomData.slice(-5).every(val => val > 0);
                
                let signal = null;
                let strength = 0;
                
                // EOM Strategy: 0 bandının üstünde kalma kontrolü
                if (this.eomAboveZero && eomTrend) {
                    signal = 'BUY';
                    strength = 7;
                } else if (!this.eomAboveZero && !eomTrend) {
                    signal = 'SELL';
                    strength = 6;
                }
                
                return {
                    signal,
                    strength,
                    eom,
                    eomAboveZero: this.eomAboveZero,
                    eomTrend
                };
            }

            getSMISignal() {
                if (this.smiKData.length < 2 || this.smiDData.length < 2) return null;
                
                const smiK = this.smiKData[this.smiKData.length - 1];
                const smiD = this.smiDData[this.smiDData.length - 1];
                
                let signal = null;
                let strength = 0;
                
                // SMI Strategy: 3M'de sinyal, momentum takibi
                if (smiK > smiD && smiK > -40) {
                    signal = 'BUY';
                    strength = 6;
                } else if (smiK < smiD && smiK < 40) {
                    signal = 'SELL';
                    strength = 6;
                }
                
                return {
                    signal,
                    strength,
                    smiK,
                    smiD
                };
            }

            analyzeConfluence(indicators) {
                const signals = [];
                let totalStrength = 0;
                let buySignals = 0;
                let sellSignals = 0;
                let strategies = [];
                
                // Collect all signals and calculate confluence
                Object.entries(indicators).forEach(([key, indicator]) => {
                    if (indicator && indicator.signal) {
                        signals.push({
                            type: indicator.signal,
                            strength: indicator.strength || 5,
                            strategy: indicator.strategy
                        });
                        
                        totalStrength += indicator.strength || 5;
                        
                        if (indicator.signal === 'BUY') {
                            buySignals++;
                        } else {
                            sellSignals++;
                        }
                        
                        if (indicator.strategy) {
                            strategies.push(indicator.strategy);
                        }
                    }
                });
                
                // Advanced confluence requirement: minimum 2 indicators must agree
                if (signals.length < 2) return { signal: null };
                
                // Determine final signal based on confluence
                let finalSignal = null;
                let finalStrength = 0;
                let confluence = signals.length;
                
                if (buySignals > sellSignals && buySignals >= 2) {
                    finalSignal = 'BUY';
                    finalStrength = Math.min(10, Math.round(totalStrength / signals.length));
                } else if (sellSignals > buySignals && sellSignals >= 2) {
                    finalSignal = 'SELL';
                    finalStrength = Math.min(10, Math.round(totalStrength / signals.length));
                }
                
                return {
                    signal: finalSignal,
                    strength: finalStrength,
                    confluence,
                    indicators,
                    strategies,
                    details: `${buySignals} BUY, ${sellSignals} SELL signals`
                };
            }

            addAdvancedSignal(confluenceAnalysis) {
                const timestamp = new Date().toLocaleString('tr-TR');
                const price = this.priceData[this.priceData.length - 1];
                
                const signalData = {
                    type: confluenceAnalysis.signal,
                    price,
                    timestamp,
                    symbol: this.symbol.toUpperCase(),
                    interval: this.interval,
                    emaShort: this.emaShort,
                    emaLong: this.emaLong,
                    volume: this.volume24h,
                    strength: confluenceAnalysis.strength,
                    confluence: confluenceAnalysis.confluence,
                    details: confluenceAnalysis.details,
                    indicators: confluenceAnalysis.indicators,
                    strategies: confluenceAnalysis.strategies
                };
                
                this.signalCount++;
                this.confluenceCount = confluenceAnalysis.confluence;
                this.lastSignalType = confluenceAnalysis.signal;
                
                // Update pair card with advanced signal display
                this.updateAdvancedSignalDisplay(signalData);
                
                // Add to parent app's signal collection
                this.parentApp.addSignal(signalData);
            }

            updateAdvancedSignalDisplay(signalData) {
                const signalEl = document.getElementById(`signal_${this.pairKey}`);
                const signalsCountEl = document.getElementById(`signals_count_${this.pairKey}`);
                const confluenceCountEl = document.getElementById(`confluence_count_${this.pairKey}`);
                
                if (signalEl) {
                    const signalColor = signalData.type === 'BUY' ? 'text-green-600' : 'text-red-600';
                    const signalBg = signalData.type === 'BUY' ? 'bg-green-100 dark:bg-green-900' : 'bg-red-100 dark:bg-red-900';
                    
                    // Create confidence stars
                    const stars = '★'.repeat(Math.ceil(signalData.strength / 2));
                    
                    // Create confluence badge
                    let confluenceBadge = '';
                    if (signalData.confluence >= 4) {
                        confluenceBadge = '🚀 VERY HIGH';
                    } else if (signalData.confluence >= 3) {
                        confluenceBadge = '⚡ HIGH';
                    } else {
                        confluenceBadge = '🔥 CONFLUENCE';
                    }
                    
                    // Strategy badges
                    const strategyText = signalData.strategies.length > 0 ? 
                        signalData.strategies.join('+') : 'EMA';
                    
                    signalEl.innerHTML = `
                        <div class="${signalBg} rounded px-3 py-2 signal-animation">
                            <div class="flex items-center justify-between mb-1">
                                <span class="font-bold ${signalColor}">${signalData.type}</span>
                                <span class="text-yellow-500 text-xs">${stars}</span>
                            </div>
                            <div class="text-xs text-gray-600 dark:text-gray-400">
                                <div class="font-semibold">${confluenceBadge}</div>
                                <div>Güç: ${signalData.strength}/10</div>
                                <div>Confluence: ${signalData.confluence} indikatör</div>
                                <div class="text-blue-600 font-medium">${strategyText}</div>
                                <div class="mt-1">${signalData.details}</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">${signalData.timestamp.split(' ')[1]}</div>
                        </div>
                    `;
                    
                    // Add advanced mobile vibration for high confluence signals
                    if ('vibrate' in navigator && signalData.confluence >= 3) {
                        navigator.vibrate([200, 100, 200, 100, 200, 100, 200]);
                    }
                }
                
                if (signalsCountEl) {
                    signalsCountEl.textContent = `${this.signalCount} signals`;
                }
                
                if (confluenceCountEl) {
                    confluenceCountEl.textContent = `${this.confluenceCount} confluence`;
                    confluenceCountEl.className = `text-xs px-2 py-1 rounded-full ${
                        this.confluenceCount >= 4 ? 'bg-red-100 dark:bg-red-900 text-red-600' :
                        this.confluenceCount >= 3 ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-600' :
                        this.confluenceCount >= 2 ? 'bg-blue-100 dark:bg-blue-900 text-blue-600' :
                        'bg-green-100 dark:bg-green-900 text-green-600'
                    }`;
                }
            }

            updateIndicatorDisplays() {
                // This method can be extended to update individual indicator values in the UI
                // Currently, the key indicators (RSI, AO) are updated in their respective calculation methods
            }

            // Helper functions
            calculateEMA(data, period) {
                if (data.length < period) return null;
                
                const multiplier = 2 / (period + 1);
                let ema = data[0];

                for (let i = 1; i < data.length; i++) {
                    ema = (data[i] * multiplier) + (ema * (1 - multiplier));
                }

                return ema;
            }

            calculateRSI(prices, period) {
                if (prices.length < period + 1) return null;
                
                let gains = 0;
                let losses = 0;
                
                for (let i = 1; i <= period; i++) {
                    const change = prices[prices.length - i] - prices[prices.length - i - 1];
                    if (change > 0) {
                        gains += change;
                    } else {
                        losses -= change;
                    }
                }
                
                const avgGain = gains / period;
                const avgLoss = losses / period;
                
                if (avgLoss === 0) return 100;
                const rs = avgGain / avgLoss;
                return 100 - (100 / (1 + rs));
            }

            calculateSMA(data) {
                if (!data || data.length === 0) return null;
                return data.reduce((sum, val) => sum + val, 0) / data.length;
            }

            detectDivergence() {
                if (this.priceData.length < 10 || this.aoData.length < 10) {
                    return { bullish: false, bearish: false };
                }
                
                const lookback = 5;
                const recentPrices = this.priceData.slice(-lookback);
                const recentAO = this.aoData.slice(-lookback);
                const olderPrices = this.priceData.slice(-lookback * 2, -lookback);
                const olderAO = this.aoData.slice(-lookback * 2, -lookback);
                
                if (olderPrices.length < lookback || olderAO.length < lookback) {
                    return { bullish: false, bearish: false };
                }
                
                const recentPriceHigh = Math.max(...recentPrices);
                const recentAOHigh = Math.max(...recentAO);
                const olderPriceHigh = Math.max(...olderPrices);
                const olderAOH
